<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<?eclipse version="3.0"?>
<plugin>
   <extension-point id="javaEditorContributor" 
   		name="Task-Focused Java Editor Contributor" 
   		schema="schema/javaEditorContributor.exsd"/>
	
	<extension
	       point="org.eclipse.mylyn.context.core.bridges">
	    <structureBridge
           class="org.eclipse.mylyn.internal.java.ui.JavaStructureBridge"
           name="Java Structure Bridge"
           parentContentType="resource"/>
     <structureBridge
           class="org.eclipse.mylyn.internal.java.ui.JavaDebugStructureBridge"
           name="Java Debug Structure Bridge"/>
     <relationProvider
           class="org.eclipse.mylyn.internal.java.ui.search.JavaImplementorsProvider"
           contentType="java">
     </relationProvider>
     <relationProvider
           class="org.eclipse.mylyn.internal.java.ui.search.JavaReadAccessProvider"
           contentType="java">
     </relationProvider>
     <relationProvider
           class="org.eclipse.mylyn.internal.java.ui.search.JavaReferencesProvider"
           contentType="java">
     </relationProvider>
     <relationProvider
           class="org.eclipse.mylyn.internal.java.ui.search.JavaWriteAccessProvider"
           contentType="java">
     </relationProvider>
     <relationProvider
           class="org.eclipse.mylyn.internal.java.ui.search.JUnitReferencesProvider"
           contentType="java">
     </relationProvider>
	<!--
     <relationProvider
           class="org.eclipse.mylyn.internal.pde.ui.XmlJavaRelationProvider"
           contentType="plugin.xml">
     </relationProvider>
    -->
	</extension>
	   
	<extension point="org.eclipse.mylyn.context.ui.bridges">
	    <uiBridge
	          class="org.eclipse.mylyn.internal.java.ui.JavaUiBridge"
	          contentType="java"
	          activeSearchIcon="icons/elcl16/edge-ref-java.gif"
           	  activeSearchLabel="Java Search"/>
	    <labelProvider
	          class="org.eclipse.mylyn.internal.java.ui.JavaContextLabelProvider"
	          contentType="java"/>
        <preservedFilters
            viewId="org.eclipse.jdt.ui.PackageExplorer">
       	 	<filter
               class="org.eclipse.jdt.internal.ui.filters.ImportDeclarationFilter">
         	</filter>
         	<filter
               class="org.eclipse.jdt.internal.ui.filters.PackageDeclarationFilter">
         	</filter>
         	<filter
               class="org.eclipse.mylyn.internal.java.ui.JavaDeclarationsFilter">
         	</filter>
          <filter
                class="org.eclipse.jdt.internal.ui.filters.ClosedProjectFilter">
          </filter>
        </preservedFilters>
        <preservedFilters
              viewId="org.eclipse.ui.navigator.ProjectExplorer">
           <filter
                 class="org.eclipse.jdt.internal.ui.filters.PackageDeclarationFilter">
           </filter>
           <filter
                 class="org.eclipse.jdt.internal.ui.filters.ImportDeclarationFilter">
           </filter>
        </preservedFilters>
   </extension>

  	<!-- ==================== Context Editing Common Navigator ==================== -->

	<extension
			point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding 
			viewerId="org.eclipse.mylyn.context.ui.navigator.context">
			<includes>
				<contentExtension pattern="org.eclipse.jdt.java.ui.javaContent" />	
			</includes>
		</viewerContentBinding>
		<viewerContentBinding 
			viewerId="org.eclipse.mylyn.context.ui.navigator.context.quick">
			<includes>
				<contentExtension pattern="org.eclipse.jdt.java.ui.javaContent" />	
			</includes>
		</viewerContentBinding>
	</extension>

  	<!-- ==================== Editors ==================== -->

	<extension
          point="org.eclipse.mylyn.tasks.ui.editors">
       <hyperlinkDetector
             class="org.eclipse.mylyn.internal.java.ui.JavaStackTraceHyperlinkDetector"
             id="org.eclipse.mylyn.java.hyperlink.detector.stack"/>
    </extension>
    
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
      <hyperlinkDetector            
            class="org.eclipse.mylyn.internal.java.ui.JavaStackTraceHyperlinkDetector"
            id="org.eclipse.mylyn.java.hyperlink.detector.stack"
            name="Mylyn Stack Trace"
            targetId="org.eclipse.ui.DefaultTextEditor"/>
            <!-- targetId="org.eclipse.mylyn.tasks.ui.TaskEditor"/> -->
   </extension>
	
  	<!-- ==================== Content Assist ==================== -->

	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="javaNoTypeProposalCategory"
		name="Other Java Proposals (Mylyn)">
		<proposalCategory
			icon="icons/elcl16/proposals-other.gif"/>
	</extension>
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="javaTypeProposalCategory"
		name="Type Proposals (Mylyn)">
		<proposalCategory
			icon="icons/elcl16/proposals-type.gif"/>
	</extension>
		<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="templateProposalCategory"
		name="Template Proposals (Mylyn)">
		<proposalCategory
			icon="/icons/elcl16/templateprop_co.gif"/>
	</extension>
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="javaTypeCompletionProposalComputer">
		<javaCompletionProposalComputer 
			class="org.eclipse.mylyn.internal.java.ui.editor.FocusedJavaTypeProposalComputer"
			categoryId="org.eclipse.mylyn.java.ui.javaTypeProposalCategory">
			<partition type="__dftl_partition_content_type"/>
			<partition type="__java_string"/>
		</javaCompletionProposalComputer>
	</extension>
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="javaNoTypeCompletionProposalComputer">
		<javaCompletionProposalComputer 
			class="org.eclipse.mylyn.internal.java.ui.editor.FocusedJavaNoTypeProposalComputer"
			categoryId="org.eclipse.mylyn.java.ui.javaNoTypeProposalCategory">
			<partition type="__dftl_partition_content_type"/>
			<partition type="__java_string"/>
		</javaCompletionProposalComputer>
	</extension>
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="TemplateProposalComputer">
		<javaCompletionProposalComputer
			class="org.eclipse.jdt.internal.ui.text.java.TemplateCompletionProposalComputer"
			categoryId="org.eclipse.mylyn.java.ui.templateProposalCategory">
			<partition type="__dftl_partition_content_type"/>
			<partition type="__java_singleline_comment"/> <!-- to get NLS templates -->
			<partition type="__java_javadoc"/>
		</javaCompletionProposalComputer>
	</extension>
		<!-- javadoc completions -->   
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="org.eclipse.mylyn.java.editor.LegacyJavadocCompletionProposalComputer">
		<javaCompletionProposalComputer 
			class="org.eclipse.jdt.internal.ui.text.javadoc.LegacyJavadocCompletionProposalComputer"
			categoryId="org.eclipse.mylyn.java.ui.javaNoTypeProposalCategory">
			<partition type="__java_javadoc"/>
		</javaCompletionProposalComputer>
	</extension>
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="org.eclipse.mylyn.java.editor.JavadocCompletionProposalComputer">
		<javaCompletionProposalComputer 
			class="org.eclipse.jdt.internal.ui.text.javadoc.JavadocCompletionProposalComputer"
			categoryId="org.eclipse.mylyn.java.ui.javaNoTypeProposalCategory">
			<partition type="__java_javadoc"/>
		</javaCompletionProposalComputer>
	</extension>
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="org.eclipse.mylyn.java.editor.JavadocHTMLCompletionProposalComputer">
		<javaCompletionProposalComputer 
			class="org.eclipse.jdt.internal.ui.text.javadoc.HTMLTagCompletionProposalComputer"
			categoryId="org.eclipse.mylyn.java.ui.javaNoTypeProposalCategory">
			<partition type="__java_javadoc"/>
		</javaCompletionProposalComputer>
	</extension>

	<extension
         point="org.eclipse.debug.core.launchConfigurationTypes">
      <launchConfigurationType
            name="Task Context Test"
            delegate="org.eclipse.mylyn.internal.java.ui.junit.TaskContextJUnitLaunchConfiguration"
            modes="run, debug"
            id="org.eclipse.mylyn.java.junit.launchconfig"
            sourceLocatorId="org.eclipse.jdt.launching.sourceLocator.JavaSourceLookupDirector"
            sourcePathComputerId="org.eclipse.jdt.launching.sourceLookup.javaSourcePathComputer">
         <fileExtension
               default="false"
               extension="java">
         </fileExtension>
         <fileExtension
               default="false"
               extension="class">
         </fileExtension>
      </launchConfigurationType>
    </extension>
    
	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
	  	<launchConfigurationTypeImage
	 		id="org.eclipse.mylyn.pde.junit.launchconfig.image"
	 		configTypeID="org.eclipse.mylyn.pde.junit.launchconfig"
	 		icon="icons/etool16/launch-junit-pde.gif">
	  	</launchConfigurationTypeImage>
	</extension>

	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
	  	<launchConfigurationTypeImage
	 		id="org.eclipse.mylyn.java.junit.launchconfig.image"
	 		configTypeID="org.eclipse.mylyn.java.junit.launchconfig"
	 		icon="icons/etool16/launch-junit.gif">
	  	</launchConfigurationTypeImage>
	</extension>
	
	<extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            type="org.eclipse.mylyn.java.junit.launchconfig"
            helpContextId="org.eclipse.jdt.junit.junit_tab_group"
            class="org.eclipse.mylyn.internal.java.ui.junit.TaskContextJUnitTabGroup"
            id="org.eclipse.mylyn.java.junit.launchconfig.tabgroup">
         <launchMode
               perspective="org.eclipse.debug.ui.DebugPerspective"
               description="Test suite automatically populated by elements in the task context."
               mode="debug">
         </launchMode>
         <launchMode
               description="Test suite automatically populated by elements in the task context."
               mode="run">
         </launchMode>
      </launchConfigurationTabGroup>
    </extension>

   <extension point="org.eclipse.ui.viewActions"> 
		<viewContribution 
		id="org.eclipse.mylyn.java.explorer.contribution" 
   		targetID="org.eclipse.jdt.ui.PackageExplorer">
    	<action
           class="org.eclipse.mylyn.internal.java.ui.actions.FocusPackageExplorerAction"
           enablesFor="*"
           icon="icons/elcl16/interest-filtering.gif"
           id="org.eclipse.mylyn.actions.filter.packageExplorer"
           label="Focus on Active Task"
           menubarPath="mylyn"
           style="toggle"
           toolbarPath="mylyn"
           tooltip="Focus on Active Task (Alt+click to reveal filtered elements)"> 
  		</action> 
      </viewContribution>
 	  <viewContribution
       id="org.eclipse.mylyn.ui.views.active.search.contribution"
       targetID="org.eclipse.mylyn.ui.views.active.search">
 		</viewContribution>
 		
 	<viewContribution 
		id="org.eclipse.mylyn.ui.debug.view.contribution" 
   		targetID="org.eclipse.debug.ui.DebugView">
    	<action
           class="org.eclipse.mylyn.internal.java.ui.actions.FocusDebugViewAction"
           enablesFor="*"
           icon="icons/elcl16/interest-filtering.gif"
           id="org.eclipse.mylyn.ui.actions.FilterResourceNavigatorAction"
           label="Focus on Active Task (Experimental)"
           menubarPath="mylyn"
           style="toggle"
           toolbarPath="mylyn"
           tooltip="Focus on Active Task (Experimental)"> 
  		</action> 
      </viewContribution> 
	</extension>
	
  <extension point="org.eclipse.ui.popupMenus"> 
     <objectContribution
     	   adaptable="false"
           id="org.eclipse.mylyn.java.ui.interest.increase.contribution"
           objectClass="org.eclipse.jdt.core.IJavaElement">
	    <action
           class="org.eclipse.mylyn.internal.context.ui.actions.InterestIncrementAction"
           definitionId="org.eclipse.mylyn.context.ui.commands.interest.increment"
           enablesFor="*"
           icon="icons/elcl16/interest-increase.gif"
           id="org.eclipse.mylyn.java.ui.interest.increase.element"
           label="Mark as Landmark"
           menubarPath="group.reorganize"
           tooltip="Mark the selected element as a landmark"/>
     <visibility>
           <objectClass
                 name="org.eclipse.jdt.core.IMember">
           </objectClass>
     </visibility>
	 </objectContribution>
     <objectContribution
           adaptable="false"
           id="org.eclipse.mylyn.java.ui.interest.remove.contribution.elements"
           objectClass="org.eclipse.jdt.core.IJavaElement">
     	<action
            class="org.eclipse.mylyn.internal.context.ui.actions.InterestDecrementAction"
            definitionId="org.eclipse.mylyn.context.ui.commands.interest.decrement"
            enablesFor="*"
            icon="icons/elcl16/interest-decrease.gif"
            id="org.eclipse.mylyn.java.ui.interest.remove.element"
            label="Remove from Context"
            menubarPath="group.reorganize"
            tooltip="Mark selected element as uninteresting">
      </action>
      <visibility>
            <or>
               <objectClass
                     name="org.eclipse.jdt.core.IMember">
               </objectClass>
               <objectClass
                     name="org.eclipse.jdt.core.IClassFile">
               </objectClass>
               <objectClass
                     name="org.eclipse.jdt.internal.compiler.env.IBinaryType">
               </objectClass>
               <objectClass
                     name="org.eclipse.jdt.internal.core.JarPackageFragment">
               </objectClass>
               <objectClass
                     name="org.eclipse.jdt.internal.core.JarPackageFragmentRoot">
               </objectClass>
            </or>
      </visibility>
     </objectContribution>
  </extension>   

  <extension point="org.eclipse.ui.actionSets">
	<actionSet
            id="org.eclipse.mylyn.java.actionSet"
            label="Mylyn Java"
            visible="false">
  		<action
          class="org.eclipse.mylyn.internal.java.ui.actions.ToggleActiveFoldingAction"
          definitionId="org.eclipse.mylyn.java.ui.editor.folding.auto"
          icon="icons/elcl16/interest-folding.gif"
          id="org.eclipse.mylyn.java.ui.editor.folding.auto"
          label="Focus Editor on Active Task"
          style="toggle"
          toolbarPath="org.eclipse.ui.edit.text.actionSet.presentation/Presentation"
          tooltip="Automatically Fold Uninteresting Elements">
      	</action> 
      	<!--
        <action
               definitionId="org.eclipse.mylyn.java.ui.search.context"
               label="Search the current task context"
               class="org.eclipse.mylyn.internal.java.ui.actions.FindReferencesInContextAction"
               id="org.eclipse.mylyn.java.ui.search.context">
         </action>
        -->
    </actionSet>
   </extension>
  
   <extension
         point="org.eclipse.ui.actionSetPartAssociations">
      <actionSetPartAssociation
            targetID="org.eclipse.mylyn.java.actionSet">
         <part
               id="org.eclipse.jdt.ui.CompilationUnitEditor">
         </part>
         <part
               id="org.eclipse.jdt.ui.ClassFileEditor">
         </part>
      </actionSetPartAssociation>
   </extension>
  
   <extension point="org.eclipse.ui.actionSets">
	<actionSet
            id="org.eclipse.mylyn.java.actionSet.browsing"
            label="Mylyn Java Browsing"
            visible="false"> 
	    <action
           class="org.eclipse.mylyn.internal.java.ui.actions.FocusBrowsingPerspectiveAction"
           id="org.eclipse.mylyn.java.ui.actions.ApplyMylynToBrowsingPerspectiveAction"
           style="toggle"
	       label="Focus Browsing Perspective" 
	       icon="icons/elcl16/interest-filtering-browsing.gif"
	       tooltip="Focus Java Browsing Views on Active Task"
	       toolbarPath="mylyn"
	       enablesFor="*">
	    </action>
  	</actionSet>
  </extension>
  
 <extension point="org.eclipse.ui.actionSetPartAssociations">
	<actionSetPartAssociation targetID="org.eclipse.mylyn.java.actionSet.browsing">
         <part id="org.eclipse.jdt.ui.MembersView"/>
         <part id="org.eclipse.jdt.ui.PackagesView"/>
         <part id="org.eclipse.jdt.ui.TypesView"/>
    </actionSetPartAssociation>
  </extension>

	<extension point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension 
			targetID="org.eclipse.jdt.ui.JavaBrowsingPerspective">
			<actionSet id="org.eclipse.mylyn.java.actionSet.browsing"/>
		</perspectiveExtension>
	</extension>

   <extension point="org.eclipse.jdt.ui.javaElementFilters">
        <filter
            targetId="org.eclipse.jdt.ui.PackageExplorer"
            name="Java Declarations Filter"
            enabled="false"
            description="Java Declarations Filter"
            class="org.eclipse.mylyn.internal.java.ui.JavaDeclarationsFilter"
            id="org.eclipse.mylyn.java.ui.MembersFilter">
   		</filter>
  </extension>
  
  	<!--
	<extension point="org.eclipse.ui.newWizards">
      <wizard
            canFinishEarly="false"
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.java.ui.wizards.RecommendedPreferencesWizard"
            hasPages="true"
            icon="icons/etool16/wizard-prefs.gif"
            id="org.eclipse.mylyn.java.ui.wizards.preferences"
            name="Recommended Preferences"
            project="false">
      </wizard>
   </extension>
	-->

   <extension point="org.eclipse.ui.commands">
      <category
            name="Mylyn Java"
            description="Mylyn Jav Commands"
            id="org.eclipse.mylyn.java.ui.commands">
      </category>
	  <command
         categoryId="org.eclipse.mylyn.java.ui.commands"
         description="Toggle Active Folding"
         id="org.eclipse.mylyn.java.ui.editor.folding.auto"
         name="Toggle Active Folding">
      </command>
   </extension>
   
</plugin>
