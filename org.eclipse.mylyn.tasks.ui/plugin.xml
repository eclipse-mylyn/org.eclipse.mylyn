<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
    <extension-point id="actions" name="Tasklist Actions" schema="schema/actions.exsd"/>
    <extension-point id="repositories" name="Task Repositories" schema="schema/repositories.exsd"/>
    <extension-point id="editors" name="Task Editors" schema="schema/editors.exsd"/>
    <extension-point id="projectLinkProviders" name="Linking Provider from Project to the Task Repository" schema="schema/projectLinkProviders.exsd"/>
    <extension-point id="duplicateDetectors" name="duplicateDetectors" schema="schema/duplicateDetectors.exsd"/>
    <extension-point id="presentations" name="presentations" schema="schema/presentations.exsd"/>
    <extension-point id="taskEditorExtensions" name="Task Editor Extension" schema="schema/taskEditorExtensions.exsd"/>
    <extension-point id="taskRepositoryPageContribution" name="Task Repository Page Contribution" schema="schema/taskRepositoryPageContribution.exsd"/>

    <extension
          point="org.eclipse.mylyn.context.core.bridges">
       <!--
       <contextStore
             class="org.eclipse.mylyn.internal.tasks.ui.LocalContextStore">
       </contextStore>
       -->
    </extension>
    <extension
          point="org.eclipse.mylyn.tasks.ui.duplicateDetectors">
       <detector
             class="org.eclipse.mylyn.internal.tasks.ui.search.StackTraceDuplicateDetector"
             name="%duplicateDetectors.name">
       </detector>
    </extension> 
    
	<extension point="org.eclipse.ui.views">
      <category name="%views.category.name" id="org.eclipse.mylyn.ui"/>
      <view
         allowMultiple="true"
         category="org.eclipse.mylyn.ui"
         class="org.eclipse.mylyn.internal.tasks.ui.views.TaskListView"
         icon="icons/eview16/task-list.gif"
         id="org.eclipse.mylyn.tasks.ui.views.tasks"
         name="%TaskListView.name"/> 
      <view
            id="org.eclipse.mylyn.tasks.ui.views.repositories"
            allowMultiple="false"
            category="org.eclipse.mylyn.ui"
            class="org.eclipse.mylyn.internal.tasks.ui.views.TaskRepositoriesView"
            icon="icons/eview16/repositories.gif"
            name="%TaskRepositoriesView.name">
      </view>
  	</extension>
     	
    <extension point="org.eclipse.ui.newWizards">
        <category name="%newWizards.category.name" id="org.eclipse.mylyn.ui.wizards.new"/>
    </extension>

    <extension
         name="Task List Startup (required)"
         point="org.eclipse.ui.startup">
       <startup
             class="org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin$TasksUiStartup">
       </startup>
    </extension>

   <!--
	<extension
         id="org.eclipse.mylyn.helpDocs"
         name="Mylyn Help"
         point="org.eclipse.help.toc">
      <toc
            file="doc/toc.xml"
            primary="false">
      </toc>
    </extension>
    -->
 <extension
         point="org.eclipse.ui.elementFactories">
      <factory
            class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskEditorInputFactory"
            id="org.eclipse.mylyn.tasks.ui.elementFactories.task.editor">
      </factory>
   </extension>
    <extension point="org.eclipse.ui.newWizards">
      <!--<wizard
            canFinishEarly="true" 
            category="org.eclipse.mylyn.wizards"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewLocalTaskWizard"
            hasPages="false"
            icon="icons/etool16/task-new.gif"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.task"
            name="Task"/> -->
      <wizard
            canFinishEarly="true"
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewLocalCategoryWizard"
            hasPages="false"
            icon="icons/etool16/category-new.gif"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.category"
            name="%NewLocalCategoryWizard.name">
      </wizard>
	  <wizard
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewTaskWizard"
            icon="icons/etool16/task-new.gif"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task"
            name="%NewTaskWizard.name"/>
      <wizard
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewQueryWizard"
            icon="icons/etool16/query-new.gif"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.query"
            name="%NewQueryWizard.name"/>
	</extension>

  <extension
        point="org.eclipse.ui.importWizards">
     <wizard
           category="org.eclipse.mylyn.tasks.ui.wizards.import.category"
           class="org.eclipse.mylyn.internal.tasks.ui.wizards.TaskDataImportWizard"
           icon="icons/etool16/tasklist-import.png"
           id="org.eclipse.mylyn.tasks.ui.wizards.import"
           name="%TaskDataImportWizard.name">
        <description>
           %TaskDataImportWizard.description
        </description>
     </wizard>
     <category
           id="org.eclipse.mylyn.tasks.ui.wizards.import.category"
           name="%import.category.name"/>
  </extension>

     <extension point="org.eclipse.ui.exportWizards"> 
      <wizard
            category="org.eclipse.mylyn.tasks.ui.wizards.export.category"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.TaskDataExportWizard"
            icon="icons/etool16/tasklist-export.png"
            id="org.eclipse.mylyn.tasks.ui.wizards.export"
            name="%TaskDataExportWizard.name"> 
         <description> 
            %TaskDataExportWizard.description
         </description> 
      </wizard>
      <category
            id="org.eclipse.mylyn.tasks.ui.wizards.export.category"
            name="%export.category.name"/> 
    </extension> 

   <extension point="org.eclipse.ui.decorators">
      <decorator
            class="org.eclipse.mylyn.internal.tasks.ui.TaskLabelDecorator"
            id="org.eclipse.mylyn.tasks.ui.decorators.task"
            label="%TaskLabelDecorator.label"
            lightweight="true"
            state="true">
         <description>
			%TaskLabelDecorator.description
		 </description>
         <enablement>
            <or>
               <objectClass
                     name="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer">
               </objectClass>
               <objectClass
                     name="org.eclipse.mylyn.tasks.core.TaskRepository">
               </objectClass>
            </or>
         </enablement>
      </decorator>
   </extension>

  	<extension
        point="org.eclipse.ui.editors">
     <editor
           class="org.eclipse.mylyn.tasks.ui.editors.TaskEditor"
           contributorClass="org.eclipse.mylyn.internal.tasks.ui.editors.TaskEditorActionContributor"
           icon="icons/etool16/task.gif"
           id="org.eclipse.mylyn.tasks.ui.editors.task"
           name="%TaskEditor.name"/>
	    <editor
           icon="icons/etool16/task.gif"
           class="org.eclipse.mylyn.internal.tasks.ui.editors.CategoryEditor"
           name="%CategoryEditor.name"
           id="org.eclipse.mylyn.tasks.ui.editors.category"/>   
     </extension>
   
      <extension point="org.eclipse.ui.perspectiveExtensions">
          <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaPerspective">
               <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.tasks"/>
               <view
                     closeable="true"
                     id="org.eclipse.mylyn.tasks.ui.views.tasks"
                     minimized="false"
                     moveable="true"
                     ratio="0.5"
                     relationship="top"
                     relative="org.eclipse.ui.views.ContentOutline"
                     visible="true"/>
               <newWizardShortcut
                     id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task">
               </newWizardShortcut>
          </perspectiveExtension>
		  <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaBrowsingPerspective">
               <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.tasks"/>
          </perspectiveExtension>
      	<perspectiveExtension
            targetID="org.eclipse.ui.resourcePerspective">
            <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.tasks"/>
	         <view
                closeable="true"
                id="org.eclipse.mylyn.tasks.ui.views.tasks"
                minimized="false"
                relationship="stack"
                relative="org.eclipse.ui.views.ContentOutline">
         </view>
          <newWizardShortcut
                id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task">
          </newWizardShortcut> 
      </perspectiveExtension>
     <perspectiveExtension
           targetID="org.eclipse.mylyn.tasks.ui.perspectives.planning">
        <newWizardShortcut
              id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task">
        </newWizardShortcut>
        <viewShortcut
              id="org.eclipse.mylyn.tasks.ui.views.repositories">
        </viewShortcut>
     </perspectiveExtension>
       
       <perspectiveExtension targetID="org.eclipse.team.cvs.ui.cvsPerspective">
        <view
              id="org.eclipse.mylyn.tasks.ui.views.repositories"
              minimized="false"
              ratio="0.7"
              relationship="bottom"
              relative="org.eclipse.team.ccvs.ui.RepositoriesView"
              visible="true"/>
        <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.repositories"/>
     </perspectiveExtension>
     
     <perspectiveExtension targetID="org.eclipse.team.ui.TeamSynchronizingPerspective">
        <view
              id="org.eclipse.mylyn.tasks.ui.views.repositories"
              minimized="false"
              ratio="0.7"
              relationship="bottom"
              relative="org.eclipse.team.sync.views.SynchronizeView"
              visible="true"/>
        <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.repositories"/>
     </perspectiveExtension>
	</extension>
  
   <extension point="org.eclipse.ui.viewActions"> 
		<viewContribution 
			id="org.eclipse.mylyn.tasks.ui.actions.view" 
	   		targetID="org.eclipse.mylyn.tasks.ui.views.tasks">
  		
  		<action
          class="org.eclipse.mylyn.internal.tasks.ui.actions.SynchronizeAllAction"
          enablesFor="*"
          icon="icons/etool16/repository-synchronize.gif"
          id="org.eclipse.mylyn.tasks.ui.synchronize.changed"
          label="%SynchronizeAllAction.label"
          menubarPath="tasks"
          toolbarPath="new"
          tooltip="%SynchronizeAllAction.tooltip">
         </action>
	    <action
	          class="org.eclipse.mylyn.internal.tasks.ui.actions.RestoreTaskListAction"
	          icon="icons/etool16/import.gif"
	          id="org.eclipse.mylyn.tasks.ui.tasks.restore"
	          label="%RestoreTaskListAction.label"
	          menubarPath="tasks"
	          style="push">
	    </action>

  		<action
          class="org.eclipse.mylyn.internal.tasks.ui.actions.ShowTaskRepositoriesViewAction"
          enablesFor="*"
          icon="icons/eview16/repositories.gif"
          id="org.eclipse.mylyn.tasks.ui.open.repositories.view"
          label="%ShowTaskRepositoriesViewAction.label"
          menubarPath="tasks"
          tooltip="%ShowTaskRepositoriesViewAction.tooltip">
         </action>
    <action
          class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenTaskSearchAction"
          icon="icons/eview16/task-search.gif"
          id="org.eclipse.mylyn.tasks.ui.search.open"
          label="%OpenTaskSearchAction.label"
          menubarPath="tasks">
    </action>
           		
  		<action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction"
               enablesFor="*"
               icon="icons/etool16/task-new.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.new.repository.task"
               label="%NewTaskAction.label"
               style="push"
               toolbarPath="new"
               tooltip="%NewTaskAction.tooltip"> 
  		</action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.ShowTasksUiLegendAction"
               icon="icons/etool16/icons-legend.gif"
               id="org.eclipse.mylyn.doc.legend.show.action"
               label="%ShowTasksUiLegendAction.label"
               menubarPath="additions"
               style="push"
               tooltip="%ShowTasksUiLegendAction.tooltip">
         </action>
    <!--<action
          class="org.eclipse.mylyn.internal.tasks.ui.actions.NewLocalTaskAction"
          icon="icons/etool16/task-new.gif"
          id="org.eclipse.mylyn.tasks.ui.actions.new.task"
          label="Task"
          style="push"
          toolbarPath="new"
          tooltip="New Task">
    </action> -->
         <!--
    	<action
          class="org.eclipse.mylyn.internal.tasklist.ui.actions.CopyDetailsAction"
          id="org.eclipse.mylyn.tasklist.copy.details"
          label="Copy Details"
          style="push"/>
  		-->
	    </viewContribution> 
	</extension>

  <extension point="org.eclipse.ui.popupMenus">
      <viewerContribution
            id="org.eclipse.mylyn.tasklist.ui.viewerContribution"
            targetID="org.eclipse.mylyn.tasks.ui.views.tasks">

         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.SynchronizeSelectedAction"
               definitionId="org.eclipse.ui.file.refresh"
               enablesFor="*"
               icon="icons/etool16/repository-synchronize.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.synchronize.selected"
               label="%SynchronizeSelectedAction.label"
               menubarPath="repository"
               tooltip="%SynchronizeSelectedAction.tooltip">
            <enablement>
               <and>
                  <not>
                     <objectClass
                           name="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                     </objectClass>
                  </not>
                  <or>
                     <objectClass
                           name="org.eclipse.mylyn.internal.tasks.core.RepositoryQuery">
                     </objectClass>
                     <objectClass
                           name="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                     </objectClass>
                     <objectClass
                           name="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer">
                     </objectClass>
                  </or>
               </and>
            </enablement>
         </action>
         
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.QueryCloneAction"
               enablesFor="org.eclipse.mylyn.internal.tasks.core.RepositoryQuery"
               icon="icons/etool16/query-new.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.clone.query"
               label="%QueryCloneAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/clone"
               tooltip="%QueryCloneAction.tooltip">
         </action>
  <action
        class="org.eclipse.mylyn.internal.tasks.ui.actions.CloneTaskAction"
        enablesFor="1"
        icon="icons/etool16/task-new.gif"
        id="org.eclipse.mylyn.tasks.ui.actions.task.query"
        label="%CloneTaskAction.label"
        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/clone"
        tooltip="%CloneTaskAction.tooltip">
     <enablement>
<!--        <and> -->
           <objectClass
                 name="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
           </objectClass>
<!--
           <not>
              <objectClass
                    name="org.eclipse.mylyn.internal.tasks.core.LocalTask">
              </objectClass>
           </not>
        </and>
-->
     </enablement>
  </action>
         
         <action
          	class="org.eclipse.mylyn.internal.tasks.ui.actions.RestoreTaskListAction"
          	icon="icons/etool16/import.gif"
          	id="org.eclipse.mylyn.tasks.ui.tasks.restore"
          	label="%RestoreTaskListAction.label"
          	menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/restore"
          	style="push">
    	</action>
         
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.QueryExportAction"
               enablesFor="org.eclipse.mylyn.internal.tasks.core.RepositoryQuery"
               icon="icons/etool16/export.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.export.query"
               label="%QueryExportAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/importexport"
               tooltip="%QueryExportAction.tooltip">
         </action>
  		
		  <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.QueryImportAction"
               enablesFor="*"
               icon="icons/etool16/import.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.import.query"
               label="%QueryImportAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/importexport"
               tooltip="%QueryImportAction.tooltip">
         </action>

         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.TaskExportAction"
               enablesFor="org.eclipse.mylyn.internal.tasks.core.AbstractTask"
               icon="icons/etool16/export.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.export.task"
               label="%TaskExportAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/importexport"
               tooltip="%TaskExportAction.tooltip">
         </action>

		  <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.TaskImportAction"
               enablesFor="*"
               icon="icons/etool16/import.gif"
               id="org.eclipse.mylyn.tasks.ui.actions.import.task"
               label="%TaskImportAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/importexport"
               tooltip="%TaskImportAction.tooltip">
         </action>

  		<action
	        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction:local"
	        enablesFor="*"
	        icon="icons/etool16/task-new.gif"
	        id="org.eclipse.mylyn.tasks.ui.new.local.task"
	        definitionId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
	        label="%NewTaskAction.local.label"
	        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/local"
	        tooltip="%NewTaskAction.local.tooltip"/>

  		<action
	        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction"
	        enablesFor="*"
	        icon="icons/etool16/task-new.gif"
	        id="org.eclipse.mylyn.tasks.ui.new.repository.task"
	        label="%NewTaskAction.label"
	        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/repository"
	        tooltip="%NewTaskAction.tooltip"/>
	              
		<action
              class="org.eclipse.mylyn.internal.tasks.ui.actions.NewQueryAction"
              enablesFor="*"
              icon="icons/etool16/query-new.gif"
              id="org.eclipse.mylyn.tasks.ui.new.query"
              menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/repository"
              label="%NewQueryAction.label"
              style="push"
              tooltip="%NewQueryAction.tooltip"> 
  		</action>
  		
  		<action
          class="org.eclipse.mylyn.internal.tasks.ui.actions.NewSubTaskAction"
          definitionId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
          enablesFor="1"
          icon="icons/etool16/sub-task-new.gif"
          id="org.eclipse.mylyn.tasks.ui.new.subtask"
          label="%NewSubTaskAction.label"
          menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/afterRepository"
          tooltip="%NewSubTaskAction.tooltip">
     <enablement>
           <objectClass
                 name="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
           </objectClass>
     </enablement>
  </action>
  		
  <menu
        id="org.eclipse.mylyn.tasks.ui.menu.new"
        label="%menu.new.label"
        path="new">
     <separator
           name="repository">
     </separator>
     <groupMarker
           name="afterRepository">
     </groupMarker>
     <separator
           name="clone">
     </separator>
     <separator
           name="local">
     </separator>
     
  </menu>

  <menu
        id="org.eclipse.mylyn.tasks.ui.menu.operations"
        label="%menu.operations.label"
        path="operations">
    <separator
           name="clone">
    </separator>
    <separator
           name="import">
    </separator>
	<separator
           name="export">
    </separator>
  </menu>
 
  
  <!--<action
        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewLocalTaskAction"
        icon="icons/etool16/task-new.gif"
        id="org.eclipse.mylyn.tasks.ui.actions.new.task"
        label="Task"
        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/local"
        style="push"
        tooltip="New Task">
  </action>-->
  <action
        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewCategoryAction"
        icon="icons/etool16/category-new.gif"
        id="org.eclipse.mylyn.tasks.ui.actions.new.category"
        label="%NewCategoryAction.label"
        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/local"
        tooltip="%NewCategoryAction.tooltip">
  </action>
      </viewerContribution>
      <viewerContribution
            id="org.eclipse.mylyn.tasks.ui.viewerContribution"
            targetID="org.eclipse.mylyn.tasks.ui.views.repositories">
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.RefreshRepositoryTasksAction"
               icon="icons/etool16/repository-synchronize.gif"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%RefreshRepositoryTasksAction.label"
               menubarPath="repository"
               style="push"
               tooltip="%RefreshRepositoryTasksAction.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="hasRepository" value="true"/>
              </and>
            </enablement>   
         </action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenRepositoryTaskAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
               icon="icons/etool16/open-repository-task.gif"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%OpenRepositoryTask.label"
               menubarPath="repository"
               style="push"
               tooltip="%OpenRepositoryTask.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="hasRepository" value="true"/>
              </and>
            </enablement>   
         </action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.NewQueryAction:skipFirstPage"
               enablesFor="*"
               icon="icons/etool16/query-new.gif"
               id="org.eclipse.mylyn.tasks.ui.new.query"
               label="%NewQueryAction.skipFirstPage.label"
               menubarPath="repository"
               style="push"
               tooltip="%NewQueryAction.skipFirstPage.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="supportQuery" value="true"/>
              </and>
            </enablement>   
         </action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction:skipFirstPage"
               enablesFor="*"
               icon="icons/etool16/task-new.gif"
               id="org.eclipse.mylyn.tasks.ui.new.repository.task"
               label="%NewTaskAction.skipFirstPage.label"
               menubarPath="repository"
               tooltip="%NewTaskAction.skipFirstPage.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="supportNewTask" value="true"/>
              </and>
            </enablement>
         </action>      
      </viewerContribution>
      
      <objectContribution
            adaptable="false"
            id="org.eclipse.mylyn.tasks.ui.contribution.attachment.compare"
            objectClass="org.eclipse.mylyn.tasks.core.ITaskAttachment">
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.CompareAttachmentsAction"
               enablesFor="2"
               icon="icons/etool16/compare.png"
               id="org.eclipse.mylyn.tasks.ui.action.attachment.compare"
               label="%CompareAttachmentsAction.label"
               menubarPath="actions"
               tooltip="%CompareAttachmentsAction.tooltip"/>
      </objectContribution>

   </extension>

   <extension
   		point="org.eclipse.ui.keywords">
      <keyword
            label="%keywords.label"
            id="org.eclipse.mylyn.tasks.ui.keywords"/>
   </extension>

  <extension point="org.eclipse.ui.preferencePages">
	  <page
            name="%preferencePages.name"
            class="org.eclipse.mylyn.internal.tasks.ui.preferences.TasksUiPreferencePage"
            id="org.eclipse.mylyn.tasks.ui.preferences">
            <keywordReference 
            	id="org.eclipse.mylyn.tasks.ui.keywords"/>
      </page>
   </extension>
 
  <extension point="org.eclipse.ui.bindings">
      <key
            sequence="M2+M3+Q K"
            commandId="org.eclipse.ui.views.showView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
            <parameter 
            	id="org.eclipse.ui.views.showView.viewId"
            	value="org.eclipse.mylyn.tasks.ui.views.tasks"/>
      </key>
      <key
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+Q K">
      </key>
      <key
            commandId="org.eclipse.ui.views.showView"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="COMMAND+ALT+Q K">
         <parameter
               id="org.eclipse.ui.views.showView.viewId"
               value="org.eclipse.mylyn.tasks.ui.views.tasks">
         </parameter>
      </key>
      <key
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+Q K">
      </key>
      <key
            commandId="org.eclipse.ui.views.showView"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="COMMAND+ALT+Q K">
         <parameter
               id="org.eclipse.ui.views.showView.viewId"
               value="org.eclipse.mylyn.tasks.ui.views.tasks">
         </parameter>
      </key>
  </extension>
  
   <extension
         point="org.eclipse.ui.themes">
      <themeElementCategory
           id="org.eclipse.mylyn.tasks.ui.presentation"
           label="%themeElementCategory.label"/>         

	 <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.today.scheduled"
           isEditable="true"
           label="%colors.foreground.today.scheduled.label"
           value="32,21,223">  
         <description>
            %colors.foreground.today.scheduled.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.past.scheduled"
           isEditable="true"
           label="%colors.foreground.past.scheduled.label"
           value="32,21,223"> 
         <description>
            %colors.foreground.past.scheduled.description
         </description>
     </colorDefinition>

	 <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.past.due"
           isEditable="true"
           label="%colors.foreground.past.due.label"
           value="198,4,38"> 
         <description>
            %colors.foreground.past.due.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.thisweek.scheduled"
           isEditable="true"
           label="%colors.foreground.thisweek.scheduled.label"
           value="0,0,0">  
         <description>
            %colors.foreground.thisweek.scheduled.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.today.completed"
           isEditable="true"
           label="%colors.foreground.today.completed.label"
           value="107,169,128">  
         <description>
            %colors.foreground.today.completed.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.completed"
           isEditable="true"
           label="%colors.foreground.completed.label"
           value="128,128,128">  
         <description>
            %colors.foreground.completed.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.incoming.background"
           isEditable="true"
           label="%colors.incoming.background.label"
           value="225,236,255"> 
         <description>
            %colors.incoming.background.description
         </description>
     </colorDefinition>  

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.category.gradient.start"
           isEditable="true"
           label="%colors.category.gradient.start.label"
           value="240,240,240"> 
         <description>
            %colors.category.gradient.start.description
         </description>
     </colorDefinition> 
 
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.category.gradient.end"
           isEditable="true"
           label="%colors.category.gradient.end.label"
           value="220,220,220"> <!-- was all 220, 234,233,237 -->
         <description>
            %colors.category.gradient.end.description
         </description>
     </colorDefinition> 

	<fontDefinition
       categoryId="org.eclipse.mylyn.tasks.ui.presentation"
       id="org.eclipse.mylyn.tasks.ui.fonts.task.editor.comment"
       isEditable="true"
       label="%fonts.task.editor.comment.label"
       value="org.eclipse.jface.dialogfont">
	     <fontValue
            ws="win32" 
            value="Tahoma-regular-10">
         </fontValue>
         <description>
            %fonts.task.editor.comment.description
         </description>
      </fontDefinition>
   </extension>
   <!-- defaultsTo="org.eclipse.jface.dialogfont"-->

   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.eclipse.mylyn.internal.tasks.ui.PlanningPerspectiveFactory"
            fixed="false"
            icon="icons/eview16/perspective-planning.png"
            id="org.eclipse.mylyn.tasks.ui.perspectives.planning"
            name="%PlanningPerspectiveFactory.name"/>
   </extension>
  
     
   <extension point="org.eclipse.mylyn.tasks.ui.actions">    
      <dynamicPopupMenu
            class="org.eclipse.mylyn.internal.tasks.ui.ScheduleTaskMenuContributor"
            menuPath="tasks"/>
      <dynamicPopupMenu
            class="org.eclipse.mylyn.internal.tasks.ui.MoveToCategoryMenuContributor"
            menuPath="tasks"/>
   </extension>
   
   <extension
         point="org.eclipse.mylyn.tasks.ui.editors">
      <pageFactory
            class="org.eclipse.mylyn.internal.tasks.ui.editors.PlanningPageFactory"
            id="org.eclipse.mylyn.tasks.ui.pageFactory.Planning">
      </pageFactory>      
   </extension>
   
   <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="org.eclipse.mylyn.tasks.ui.navigation"
            label="%actionSet.navigation.label"
            visible="true">
		<action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.DeactivateAllTasksAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.deactivateAllTasks"
               icon="icons/etool16/task-inactive-centered.gif"
               id="org.eclipse.mylyn.tasks.ui.deactivateAllTasks"
               label="%DeactivateAllTasksAction.label"
               menubarPath="navigate/open.ext3"
               style="push"/>
		<action
        	class="org.eclipse.mylyn.internal.tasks.ui.actions.ActivateTaskDialogAction"
        	definitionId="org.eclipse.mylyn.tasks.ui.command.activateTask"
        	icon="icons/etool16/task-active-centered.gif"
        	id="org.eclipse.mylyn.tasks.ui.switchTask"
        	label="%ActivateTaskDialogAction.label"
        	menubarPath="navigate/open.ext3"
        	style="push"/>
        <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenTaskAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.openTask"
               icon="icons/etool16/open-task.gif"
               id="org.eclipse.mylyn.tasks.ui.openTask"
               label="%OpenTaskAction.label"
               menubarPath="navigate/open.ext3"
               style="push"
               toolbarPath="org.eclipse.search.searchActionSet/Search"
               tooltip="%OpenTaskAction.tooltip"/>
		<action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.SearchForRepositoryTask"
               definitionId="org.eclipse.mylyn.tasks.ui.command.searchForTask"
               icon="icons/etool16/open-repository-task.gif"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%SearchForRepositoryTask.label"
               style="push"
               tooltip="%SearchForRepositoryTask.tooltip"/>
      </actionSet>
   </extension>
   
   <extension point="org.eclipse.ui.commands">
      <command id="org.eclipse.mylyn.tasks.ui.command.previousTask"
               defaultHandler="org.eclipse.mylyn.internal.tasks.ui.TaskHistoryHandler"
               name="%command.previousTask.name"/>
   </extension>

  <!-- command-based implementation of the previousTask/history dropdown, 
       the problem is that it doesn't work well with the actionSet  
  <extension point="org.eclipse.ui.menus">
    <menuContribution locationURI="menu:org.eclipse.mylyn.tasks.ui.previous.task">
      <dynamic
         class="org.eclipse.mylyn.internal.tasks.ui.TaskHistoryDropDown"
         id="org.eclipse.mylyn.tasks.ui.previous.task.dropdown"/>
    </menuContribution>
  </extension>  
   
  <extension point="org.eclipse.ui.menus">
    <menuContribution locationURI="toolbar:org.eclipse.ui.workbench.navigate">
        <command id="org.eclipse.mylyn.tasks.ui.previous.task"
                 commandId="org.eclipse.mylyn.tasks.ui.command.previousTask"
                 icon="icons/etool16/navigate-previous.gif"
                 label="Activate Previous Task"
                 tooltip="Activate Previous Task"
                 style="pulldown">
          <visibleWhen>
            <with variable="activeContexts">
              <iterate operator="or">
                <equals value="org.eclipse.mylyn.tasks.ui.navigation.additions"/>
              </iterate>
            </with>              
          </visibleWhen>
        </command>
    </menuContribution>
  </extension>
  -->

   <extension point="org.eclipse.ui.actionSets">
      <actionSet
            id="org.eclipse.mylyn.tasks.ui.navigation.additions"
            label="%actionSet.navigation.additions.label"
            visible="false">
  		<action
	          allowLabelUpdate="true"
	          class="org.eclipse.mylyn.internal.tasks.ui.actions.ActivateTaskHistoryDropDownAction"
	          icon="icons/etool16/navigate-previous.gif"
	          id="org.eclipse.mylyn.tasks.ui.navigate.task.history"
	          label="%ActivateTaskHistoryDropDownAction.label"
	          style="pulldown"
	          toolbarPath="org.eclipse.ui.workbench.navigate/Tasks"
	          tooltip="%ActivateTaskHistoryDropDownAction.tooltip">
      	</action>       
      	<action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenRepositoryTaskAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
               icon="icons/etool16/open-repository-task.gif"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%OpenRepositoryTask.label"
               menubarPath="navigate/open.ext3"
               style="push" 
               tooltip="%OpenRepositoryTask.tooltip"/>  
      </actionSet>
   </extension>
   
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.openTask"
            name="%ommand.openTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.searchForTask"
            name="%command.searchForTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.OpenRepositoryTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
            name="%command.openRemoteTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.activateTask"
            name="%command.activateTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.deactivateAllTasks"
            name="%command.deactivateAllTasks.name"/>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F12"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openTask"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+F12">
      </key>
      <key
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F12">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openTask"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+F12">
      </key>
      <key
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F12">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.searchForTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+F12"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+M3+F12"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.activateTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F9"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.deactivateAllTasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+F9"/>
   </extension>
   
   <extension
         id="org.eclipse.mylyn.tasks.ui.search.results"
         point="org.eclipse.search.searchResultViewPages">
      <viewPage
            class="org.eclipse.mylyn.internal.tasks.ui.search.RepositorySearchResultView"
            searchResultClass="org.eclipse.mylyn.internal.tasks.ui.search.RepositorySearchResult"
            id="org.eclipse.mylyn.internal.tasks.ui.search.RepositorySearchResultView"/>
<!--            id="org.eclipse.mylyn.bugzilla.BugzillaSearchResultPage"/>-->
   </extension>
    <extension
         id="org.eclipse.mylyn.tasks.ui.repositorySearchPage"
         name="%repositorySearchPage.name"
         point="org.eclipse.search.searchPages">
       <page
            class="org.eclipse.mylyn.internal.tasks.ui.TaskSearchPage"
            enabled="true" 
            icon="icons/eview16/task-search.gif"
            id="org.eclipse.mylyn.tasks.ui.search.page"
            label="%TaskSearchPage.label" 
            tabPosition="999"/>
   </extension>
    <extension
          point="org.eclipse.ui.propertyPages">
       <page
             class="org.eclipse.mylyn.internal.tasks.ui.properties.ProjectTaskRepositoryPage"
             id="org.eclipse.mylyn.tasks.ui.properties.pages.project.repository"
             name="%ProjectTaskRepositoryPage.name">
          <enabledWhen>
             <adapt
                   type="org.eclipse.core.resources.IProject">
             </adapt>
          </enabledWhen>
       </page>
    </extension>
    <extension
          point="org.eclipse.ui.commands">
       <category
             id="org.eclipse.mylyn.tasks.ui.commands"
             name="%commands.category.repositories.name">
       </category>
       <command
             categoryId="org.eclipse.mylyn.tasks.ui.commands"
             defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.AddTaskRepositoryHandler"
             id="org.eclipse.mylyn.tasks.ui.command.addTaskRepository"
             name="%command.addTaskRepository.name">
          <commandParameter
                id="connectorKind"
                name="%command.addTaskRepository.commandParameter.name"
                optional="true"
                values="org.eclipse.mylyn.internal.tasks.ui.commands.TaskRepositoryParameterValues">
          </commandParameter>
       </command>
    </extension>
    <extension
          point="org.eclipse.mylyn.tasks.ui.projectLinkProviders">
       <linkProvider
             class="org.eclipse.mylyn.internal.tasks.ui.properties.ProjectPropertiesLinkProvider"
             name="%ProjectPropertiesLinkProvider.name"
             order="1000"
             id="org.eclipse.mylyn.tasks.ui.defaultRepositoryLinkProvider">
       </linkProvider>
    </extension>
    <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer"
            class="org.eclipse.mylyn.internal.tasks.ui.search.SearchScoreComputerAdapterFactory">
         <adapter
               type="org.eclipse.search.ui.ISearchPageScoreComputer">
         </adapter>
      </factory>
   </extension>
   
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
      <hyperlinkDetector            
            class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskHyperlinkDetector"
            id="org.eclipse.mylyn.tasks.ui.hyperlinks.detectors.task"
            name="%TaskHyperlinkDetector.name"
            targetId="org.eclipse.ui.DefaultTextEditor">
      </hyperlinkDetector>
      <hyperlinkDetector
            class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskUrlHyperlinkDetector"
            description="%TaskUrlHyperlinkDetector.description"
            id="org.eclipse.mylyn.tasks.ui.hyperlinks.detectors.url"
            name="%TaskUrlHyperlinkDetector.name"
            targetId="org.eclipse.ui.DefaultTextEditor">
      </hyperlinkDetector>
   </extension>
   
	<extension 
		point="org.eclipse.ui.workingSets">
		<workingSet
        elementAdapterClass="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetElementAdapter"
        icon="icons/obj16/workingSet.gif"
        id="org.eclipse.mylyn.tasks.ui.workingSet"
        name="%TaskWorkingSetElementAdapter.name"
        pageClass="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetPage"
        updaterClass="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetUpdater"/>
	</extension>

 <extension point="org.eclipse.core.runtime.adapters">
    <factory
          adaptableType="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer"
          class="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetAdapterFactory">
       <adapter type="org.eclipse.ui.IPersistableElement"/>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.core.TaskRepository"
          class="org.eclipse.mylyn.internal.tasks.ui.TaskRepositoryAdapterFactory">
       <adapter type="org.eclipse.ui.IActionFilter"/>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.ui.editors.TaskEditorInput"
          class="org.eclipse.mylyn.internal.tasks.ui.TasksAdapterFactory">
       <adapter
             type="org.eclipse.mylyn.tasks.core.ITask">
       </adapter>
       <adapter
             type="org.eclipse.mylyn.tasks.core.TaskRepository">
       </adapter>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.core.ITaskAttachment"
          class="org.eclipse.mylyn.internal.tasks.ui.TasksAdapterFactory">
       <adapter
             type="org.eclipse.mylyn.tasks.core.ITask">
       </adapter>
       <adapter
             type="org.eclipse.mylyn.tasks.core.TaskRepository">
       </adapter>
    </factory>
 </extension>

 <extension
       point="org.eclipse.ui.elementFactories">
    <factory
          class="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetElementFactory"
          id="org.eclipse.mylyn.tasks.ui.workingSets.elementFactory">
    </factory>
</extension>
   <extension
         id="org.eclipse.mylyn.tasks.local.repository" 
         name="%local.repository.name"
         point="org.eclipse.mylyn.tasks.ui.repositories">
      <connectorCore
            class="org.eclipse.mylyn.internal.tasks.core.LocalRepositoryConnector"
            id="org.eclipse.mylyn.tasks.connector.local"
            name="%LocalRepositoryConnector.name"/>            
      <connectorUi
            brandingIcon="icons/etool16/person.gif"
            class="org.eclipse.mylyn.internal.tasks.ui.LocalRepositoryConnectorUi"
            name="%LocalRepositoryConnectorUi.name"
            overlayIcon="icons/ovr16/overlay-local.gif"/>
   </extension>
         
   <extension point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectorTargets">
     <target id="org.eclipse.mylyn.tasks.ui.TaskEditor" name="%hyperlinkDetectorTargets.name"/>
   </extension>

   <extension point="org.eclipse.mylyn.tasks.ui.presentations">
      <presentation
            class="org.eclipse.mylyn.internal.tasks.ui.CategorizedPresentation"
            icon="icons/etool16/category.gif"
            id="org.eclipse.mylyn.tasks.ui.categorized"
            name="%CategorizedPresentation.name"
            primary="true"/>
      <presentation
            class="org.eclipse.mylyn.internal.tasks.ui.ScheduledPresentation"
            icon="icons/etool16/calendar.gif"
            id="org.eclipse.mylyn.tasks.ui.scheduled"
            name="%ScheduledPresentation.name"
            primary="true"/>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.navigate"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.GoToUnreadTaskHandler$GoToPreviousUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.goToPreviousUnread"
            name="%command.goToPreviousUnread.name">
      </command>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.GoToUnreadTaskHandler$GoToNextUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.goToNextUnread"
            name="%command.goToNextUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.TaskListToolTipHandler"
            id="org.eclipse.mylyn.tasks.ui.command.showToolTip"
            name="%command.showToolTip.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskReadHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
            name="%command.markTaskRead.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskUnreadHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
            name="%command.markTaskUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskReadGoToNextUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToNextUnread"
            name="%command.markTaskReadGoToNextUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskReadGoToPreviousUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToPreviousUnread"
            name="%command.markTaskReadGoToPreviousUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
            name="%command.markTaskComplete.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
            name="%command.markTaskIncomplete.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.task.clearOutgoing"
            name="%command.task.clearOutgoing.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.NewSubTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            name="%command.new.subtask.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.NewLocalTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            name="%command.new.local.task.name">
      </command>
      
      <category
            id="org.eclipse.mylyn.tasks.ui.commands"
            name="%commands.category.name">
      </category>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.OpenSelectedTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.openSelectedTask"
            name="%command.openSelectedTask.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            id="org.eclipse.mylyn.tasks.ui.command.attachment.openInBrowser"
            name="%command.attachment.openInBrowser.name">
      </command>
      <category
            id="org.eclipse.mylyn.tasks.ui.category.editor"
            name="%commands.category.editor.name">
      </category>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            id="org.eclipse.mylyn.tasks.ui.command.attachment.openInDefaultEditor"
            name="%command.attachment.openInDefaultEditor.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.SubmitTaskHandler"
            description="%command.submitTask.description"
            id="org.eclipse.mylyn.tasks.ui.command.submitTask"
            name="%command.submitTask.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.goToPreviousUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+ARROW_UP">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.goToNextUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+ARROW_DOWN">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.showToolTip"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F4">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+R">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+U">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToNextUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+ARROW_DOWN">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToPreviousUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+ARROW_UP">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+INSERT">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="INSERT">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openSelectedTask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+ENTER">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+C">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+I">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.submitTask"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+S">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+N">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+N">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+N">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+N">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="org.eclipse.mylyn.tasks.ui.views.tasks"
            name="%context.views.tasks.name"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>
      
       
	<extension point="org.eclipse.ui.navigator.navigatorContent">
		<commonFilter
			id="org.eclipse.mylyn.tasks.ui.navigator.filters.tasks"
			name="%filters.tasks.name"
			description="%filters.tasks.description" 
			activeByDefault="true">
			<filterExpression>
				<instanceof
					value="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer" />
			</filterExpression>
		</commonFilter>
   </extension>
   <extension point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding
			viewerId="org.eclipse.ui.navigator.ProjectExplorer">
			<includes>
				<contentExtension
					pattern="org.eclipse.mylyn.tasks.ui.navigator.filters.tasks" />
			</includes>
		</viewerContentBinding>
	</extension>
          
    <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskListElementPropertiesHandler"
            commandId="org.eclipse.ui.file.properties">
         <activeWhen>
			<with variable="activePartId">
			    <equals value="org.eclipse.mylyn.tasks.ui.views.tasks"/>
			</with> 
         </activeWhen>
         <enabledWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <or>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.RepositoryQuery">
                     </instanceof>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.TaskCategory">
                     </instanceof>
                  </or>
               </iterate>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskRepositoryPropertiesHandler"
            commandId="org.eclipse.ui.file.properties">
         <activeWhen>
			<with variable="activePartId">
			    <equals value="org.eclipse.mylyn.tasks.ui.views.repositories"/>
			</with> 
         </activeWhen>
         <enabledWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <and>
                     <instanceof
                           value="org.eclipse.mylyn.tasks.core.TaskRepository">
                     </instanceof>
                     <test
                           forcePluginActivation="true"
                           property="org.eclipse.mylyn.taskRepository.userManaged"
                           value="true">
                     </test>
                     <not>
                        <test
                              forcePluginActivation="true"
                              property="org.eclipse.mylyn.taskRepository.connectorKind"
                              value="local">
                        </test>
                     </not>
                  </and>
               </iterate>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskAttachmentInBrowserHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.attachment.openInBrowser">
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskAttachmentInDefaultEditorHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.attachment.openInDefaultEditor">
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskCompleteHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <instanceof
                        value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                  </instanceof>
                  <test
                        property="org.eclipse.mylyn.task.hasLocalCompletionState"
                        value="true">
                  </test>
                  <test
                        property="org.eclipse.mylyn.task.isCompleted"
                        value="false">
                  </test>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskIncompleteHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <instanceof
                        value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                  </instanceof>
                  <test
                        property="org.eclipse.mylyn.task.hasLocalCompletionState"
                        value="true">
                  </test>
                  <test
                        property="org.eclipse.mylyn.task.isCompleted"
                        value="true">
                  </test>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$ClearOutgoingHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.task.clearOutgoing">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <instanceof
                        value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                  </instanceof>
                  <test
                        property="org.eclipse.mylyn.task.hasEdits"
                        value="true">
                  </test>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.views.tasks?after=properties">
         <command
               commandId="org.eclipse.ui.file.properties"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.views.repositories?after=properties">
         <command
               commandId="org.eclipse.ui.file.properties"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.editor.menu.attachments?after=group.open">
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.attachment.openInBrowser"
               label="%command.attachment.openInBrowser.label"
               mnemonic="O"
               style="push">
         </command>
         <menu
               label="%command.attachment.openInDefaultEditor.menu.label"
               mnemonic="H">
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.attachment.openInDefaultEditor"
                  label="%command.attachment.openInDefaultEditor.label"
                  mnemonic="D"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?before=navigate">
         <menu
               id="org.eclipse.mylyn.tasks.ui.menu.task.mark"
               label="%menu.task.mark.label">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <or>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer">
                     </instanceof>
                  </or>
               </iterate>
            </visibleWhen>
            <separator
                  name="group.taskStatus"
                  visible="true">
            </separator>
            <separator
                  name="group.synchronizationStatus"
                  visible="true">
            </separator>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
                  label="%command.markTaskRead.label"
                  mnemonic="R"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <iterate>
                     <not>
                        <instanceof
                              value="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                        </instanceof>
                     </not>
                  </iterate>
               </visibleWhen>
            </command>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
                  label="%command.markTaskUnread.label"
                  mnemonic="U"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <iterate>
                     <not>
                        <instanceof
                              value="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                        </instanceof>
                     </not>
                  </iterate>
               </visibleWhen>
            </command>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.task.clearOutgoing"
                  label="%command.task.clearOutgoing.label"
                  mnemonic="C"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <iterate>
                     <and>
                        <instanceof
                              value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                        </instanceof>
                     <not>
                           <instanceof
                                 value="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                           </instanceof>
                     </not>
                     </and>
                  </iterate>
               </visibleWhen>
            </command>
            <separator
                  name="additions">
            </separator>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.menu.task.mark?after=group.taskStatus">
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
               icon="icons/etool16/task-complete.gif"
               label="%command.markTaskComplete.label"
               mnemonic="C"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     operator="or">
                  <and>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                     </instanceof>
                     <test
                           property="org.eclipse.mylyn.task.hasLocalCompletionState"
                           value="true">
                     </test>
                  </and>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
               icon="icons/etool16/task-incomplete.gif"
               label="%command.markTaskIncomplete.label"
               mnemonic="I"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     operator="or">
                  <and>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                     </instanceof>
                     <test
                           property="org.eclipse.mylyn.task.hasLocalCompletionState"
                           value="true">
                     </test>
                  </and>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:goTo">
         <separator
               name="group.taskList"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.goToPreviousUnread"
               label="%command.goToPreviousUnread.label"
               mnemonic="P"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeContexts">
                  <iterate
                        operator="or">
                     <equals
                           value="org.eclipse.mylyn.tasks.ui.views.tasks">
                     </equals>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.goToNextUnread"
               label="%command.goToNextUnread.label"
               mnemonic="N"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeContexts">
                  <iterate
                        operator="or">
                     <equals
                           value="org.eclipse.mylyn.tasks.ui.views.tasks">
                     </equals>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskPropertyTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.task"
            namespace="org.eclipse.mylyn.task"
            properties="canGetAttachment,canPostAttachment,connectorKind,hasEdits,hasLocalContext,hasLocalCompletionState,hasRepositoryContext,isCompleted,isLocal,"
            type="org.eclipse.mylyn.tasks.core.ITask">
      </propertyTester>
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskAttachmentPropertyTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.task.attachment"
            namespace="org.eclipse.mylyn.task.attachment"
            properties="isContext,hasUrl"
            type="org.eclipse.mylyn.tasks.core.ITaskAttachment">
      </propertyTester>
   </extension>
   
   <extension
         point="org.eclipse.mylyn.commons.core.errorReporters">
      <errorReporter
            class="org.eclipse.mylyn.internal.tasks.ui.DialogErrorReporter"
            id="org.eclipse.mylyn.tasks.bugs.errorReporter"
            label="%tasks.bugs.errorReporter.label">
      </errorReporter>
   </extension>   
   
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MaximizePartHandler"
            description="%command.maximizePart.description"
            id="org.eclipse.mylyn.tasks.ui.command.maximizePart"
            name="%command.maximizePart.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.ViewSourceHandler"
            id="org.eclipse.mylyn.sandbox.ui.viewSource.command"
            name="%commands.ViewSourceHandler">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.maximizePart"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+M">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="org.eclipse.mylyn.tasks.ui.editors.task"
            name="%context.editors.task.name"
            parentId="org.eclipse.ui.textEditorScope">
      </context>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskRepositoryPropertyTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.taskRepository"
            namespace="org.eclipse.mylyn.taskRepository"
            properties="connectorKind,userManaged"
            type="org.eclipse.mylyn.tasks.core.TaskRepository">
      </propertyTester>
   </extension>
    <extension
          point="org.eclipse.mylyn.tasks.ui.taskRepositoryPageContribution">
       <taskRepositoryPageContribution
       		 id="org.eclipse.mylyn.tasks.ui.taskEditorExtensionSettings"
             class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskEditorExtensionSettingsContribution">
       </taskRepositoryPageContribution>
    </extension>
</plugin>
