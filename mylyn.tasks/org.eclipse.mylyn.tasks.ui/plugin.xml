<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<!--
    Copyright (c) 2009, 2013 Tasktop Technologies and others.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v2.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v20.html

    Contributors:
         Tasktop Technologies - initial API and implementation
 -->
<plugin>
    <extension-point id="actions" name="Tasklist Actions" schema="schema/actions.exsd"/>
    <extension-point id="repositories" name="Task Repositories" schema="schema/repositories.exsd"/>
    <extension-point id="editors" name="Task Editors" schema="schema/editors.exsd"/>
    <extension-point id="projectLinkProviders" name="Linking Provider from Project to the Task Repository" schema="schema/projectLinkProviders.exsd"/>
    <extension-point id="duplicateDetectors" name="duplicateDetectors" schema="schema/duplicateDetectors.exsd"/>
    <extension-point id="presentations" name="presentations" schema="schema/presentations.exsd"/>
    <extension-point id="taskEditorExtensions" name="Task Editor Extension" schema="schema/taskEditorExtensions.exsd"/>
    <extension-point id="taskRepositoryPageContribution" name="Task Repository Page Contribution" schema="schema/taskRepositoryPageContribution.exsd"/>
    <extension-point id="taskEditorPageContribution" name="Task Editor Page Contribution" schema="schema/taskEditorPageContribution.exsd"/>
    <extension-point id="searchProvider" name="Search Handling Provider" schema="schema/searchProvider.exsd"/>
    <extension-point id="searchHandler" name="Search Handler" schema="schema/searchHandler.exsd"/>
    <extension-point id="taskDropListener" name="Task Drop Listener" schema="schema/taskDropListener.exsd"/>

    <extension
          point="org.eclipse.mylyn.context.core.bridges">
       <!--
       <contextStore
             class="org.eclipse.mylyn.internal.tasks.ui.LocalContextStore">
       </contextStore>
       -->
    </extension>

	<extension point="org.eclipse.ui.views">
      <category name="%views.category.name" id="org.eclipse.mylyn.ui"/>
      <view
         allowMultiple="true"
         category="org.eclipse.mylyn.ui"
         class="org.eclipse.mylyn.internal.tasks.ui.views.TaskListView"
         icon="icons/eview16/task-list.png"
         id="org.eclipse.mylyn.tasks.ui.views.tasks"
         name="%TaskListView.name"/>
      <view
            id="org.eclipse.mylyn.tasks.ui.views.repositories"
            allowMultiple="false"
            category="org.eclipse.mylyn.ui"
            class="org.eclipse.mylyn.internal.tasks.ui.views.TaskRepositoriesView"
            icon="icons/eview16/repositories.png"
            name="%TaskRepositoriesView.name">
      </view>
  	</extension>
     	
    <extension point="org.eclipse.ui.newWizards">
        <category name="%newWizards.category.name" id="org.eclipse.mylyn.ui.wizards.new"/>
    </extension>

    <extension
         name="Task List Startup (required)"
         point="org.eclipse.ui.startup">
       <startup
             class="org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin$TasksUiStartup">
       </startup>
    </extension>

   <!--
	<extension
         id="org.eclipse.mylyn.helpDocs"
         name="Mylyn Help"
         point="org.eclipse.help.toc">
      <toc
            file="doc/toc.xml"
            primary="false">
      </toc>
    </extension>
    -->
 <extension
         point="org.eclipse.ui.elementFactories">
      <factory
            class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskEditorInputFactory"
            id="org.eclipse.mylyn.tasks.ui.elementFactories.task.editor">
      </factory>
   </extension>
    <extension point="org.eclipse.ui.newWizards">
      <!--<wizard
            canFinishEarly="true"
            category="org.eclipse.mylyn.wizards"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewLocalTaskWizard"
            hasPages="false"
            icon="icons/etool16/task-new.png"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.task"
            name="Task"/> -->
      <wizard
            canFinishEarly="true"
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewLocalCategoryWizard"
            hasPages="false"
            icon="icons/etool16/category-new.png"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.category"
            name="%NewLocalCategoryWizard.name">
      </wizard>
	  <wizard
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewTaskWizardInternal"
            icon="icons/etool16/task-new.png"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task"
            name="%NewTaskWizard.name"/>
      <wizard
            category="org.eclipse.mylyn.ui.wizards.new"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewQueryWizard"
            icon="icons/etool16/query-new.png"
            id="org.eclipse.mylyn.tasks.ui.wizards.new.query"
            name="%NewQueryWizard.name"/>
	</extension>

  <extension
        point="org.eclipse.ui.importWizards">
     <wizard
           category="org.eclipse.mylyn.tasks.ui.wizards.import.category"
           class="org.eclipse.mylyn.internal.tasks.ui.wizards.TaskDataImportWizard"
           icon="icons/etool16/tasklist-import.png"
           id="org.eclipse.mylyn.tasks.ui.wizards.import"
           name="%TaskDataImportWizard.name">
        <description>
           %TaskDataImportWizard.description
        </description>
     </wizard>
     <category
           id="org.eclipse.mylyn.tasks.ui.wizards.import.category"
           name="%import.category.name"/>
  </extension>

     <extension point="org.eclipse.ui.exportWizards">
      <wizard
            category="org.eclipse.mylyn.tasks.ui.wizards.export.category"
            class="org.eclipse.mylyn.internal.tasks.ui.wizards.TaskDataExportWizard"
            icon="icons/etool16/tasklist-export.png"
            id="org.eclipse.mylyn.tasks.ui.wizards.export"
            name="%TaskDataExportWizard.name">
         <description>
            %TaskDataExportWizard.description
         </description>
      </wizard>
      <category
            id="org.eclipse.mylyn.tasks.ui.wizards.export.category"
            name="%export.category.name"/>
    </extension>

   <extension point="org.eclipse.ui.decorators">
      <decorator
            class="org.eclipse.mylyn.internal.tasks.ui.TaskLabelDecorator"
            id="org.eclipse.mylyn.tasks.ui.decorators.task"
            label="%TaskLabelDecorator.label"
            lightweight="true"
            state="true">
         <description>
			%TaskLabelDecorator.description
		 </description>
         <enablement>
            <or>
               <objectClass
                     name="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer">
               </objectClass>
               <objectClass
                     name="org.eclipse.mylyn.tasks.core.TaskRepository">
               </objectClass>
            </or>
         </enablement>
      </decorator>
   </extension>

  	<extension
        point="org.eclipse.ui.editors">
     <editor
           class="org.eclipse.mylyn.tasks.ui.editors.TaskEditor"
           contributorClass="org.eclipse.mylyn.internal.tasks.ui.editors.TaskEditorActionContributor"
           icon="icons/etool16/task.png"
           id="org.eclipse.mylyn.tasks.ui.editors.task"
           name="%TaskEditor.name"/>
	</extension>
	
      <extension point="org.eclipse.ui.perspectiveExtensions">
          <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaPerspective">
               <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.tasks"/>
               <view
                     closeable="true"
                     id="org.eclipse.mylyn.tasks.ui.views.tasks"
                     minimized="false"
                     moveable="true"
                     ratio="0.5"
                     relationship="top"
                     relative="org.eclipse.ui.views.ContentOutline"
                     visible="true"/>
               <newWizardShortcut
                     id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task">
               </newWizardShortcut>
          </perspectiveExtension>
		  <perspectiveExtension targetID="org.eclipse.jdt.ui.JavaBrowsingPerspective">
               <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.tasks"/>
          </perspectiveExtension>
      	<perspectiveExtension
            targetID="org.eclipse.ui.resourcePerspective">
            <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.tasks"/>
	         <view
                closeable="true"
                id="org.eclipse.mylyn.tasks.ui.views.tasks"
                minimized="false"
                relationship="stack"
                relative="org.eclipse.ui.views.ContentOutline">
         </view>
          <newWizardShortcut
                id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task">
          </newWizardShortcut>
      </perspectiveExtension>
     <perspectiveExtension
           targetID="org.eclipse.mylyn.tasks.ui.perspectives.planning">
        <newWizardShortcut
              id="org.eclipse.mylyn.tasks.ui.wizards.new.repository.task">
        </newWizardShortcut>
        <viewShortcut
              id="org.eclipse.mylyn.tasks.ui.views.repositories">
        </viewShortcut>
     </perspectiveExtension>

       <perspectiveExtension targetID="org.eclipse.team.cvs.ui.cvsPerspective">
        <view
              id="org.eclipse.mylyn.tasks.ui.views.repositories"
              minimized="false"
              ratio="0.7"
              relationship="bottom"
              relative="org.eclipse.team.ccvs.ui.RepositoriesView"
              visible="true"/>
        <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.repositories"/>
     </perspectiveExtension>

     <perspectiveExtension targetID="org.eclipse.team.ui.TeamSynchronizingPerspective">
        <view
              id="org.eclipse.mylyn.tasks.ui.views.repositories"
              minimized="false"
              ratio="0.7"
              relationship="bottom"
              relative="org.eclipse.team.sync.views.SynchronizeView"
              visible="true"/>
        <viewShortcut id="org.eclipse.mylyn.tasks.ui.views.repositories"/>
     </perspectiveExtension>
	</extension>

   <extension point="org.eclipse.ui.viewActions">
		<viewContribution
			id="org.eclipse.mylyn.tasks.ui.actions.view"
	   		targetID="org.eclipse.mylyn.tasks.ui.views.tasks">
	  		<action
	          class="org.eclipse.mylyn.internal.tasks.ui.actions.SynchronizeAllAction"
	          enablesFor="*"
	          icon="icons/etool16/repository-synchronize.png"
	          id="org.eclipse.mylyn.tasks.ui.synchronize.changed"
	          label="%SynchronizeAllAction.label"
	          menubarPath="tasks"
	          toolbarPath="new"
	          tooltip="%SynchronizeAllAction.tooltip">
	         </action>
		    <action
		          class="org.eclipse.mylyn.internal.tasks.ui.actions.RestoreTaskListAction"
		          icon="icons/etool16/import.png"
		          id="org.eclipse.mylyn.tasks.ui.tasks.restore"
		          label="%RestoreTaskListAction.label"
		          menubarPath="tasks"
		          style="push">
		    </action>
	
	  		<action
	          class="org.eclipse.mylyn.internal.tasks.ui.actions.ShowTaskRepositoriesViewAction"
	          enablesFor="*"
	          icon="icons/eview16/repositories.png"
	          id="org.eclipse.mylyn.tasks.ui.open.repositories.view"
	          label="%ShowTaskRepositoriesViewAction.label"
	          menubarPath="tasks"
	          tooltip="%ShowTaskRepositoriesViewAction.tooltip">
	         </action>           		
	         <action
	               class="org.eclipse.mylyn.internal.tasks.ui.actions.ShowTasksUiLegendAction"
	               icon="icons/etool16/icons-legend.png"
	               id="org.eclipse.mylyn.doc.legend.show.action"
	               label="%ShowTasksUiLegendAction.label"
	               menubarPath="additions"
	               style="push"
	               tooltip="%ShowTasksUiLegendAction.tooltip">
	         </action>

			<action		
				class="org.eclipse.mylyn.internal.tasks.ui.actions.FocusTaskListAction"		
				enablesFor="*"		
				icon="icons/eview16/focus.png"		
				id="org.eclipse.mylyn.context.ui.actions.tasklist.focus"		
				label="%FocusTaskListAction.label"		
				menubarPath="additions"		
				style="toggle"		
				toolbarPath="context"		
				tooltip="%FocusTaskListAction.tooltip"/>
	    </viewContribution>
	</extension>

  <extension point="org.eclipse.ui.popupMenus">

      <viewerContribution
            id="org.eclipse.mylyn.tasklist.ui.viewerContribution"
            targetID="org.eclipse.mylyn.tasks.ui.views.tasks">

         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.SynchronizeSelectedAction"
               definitionId="org.eclipse.ui.file.refresh"
               enablesFor="*"
               icon="icons/etool16/repository-synchronize.png"
               id="org.eclipse.mylyn.tasks.ui.actions.synchronize.selected"
               label="%SynchronizeSelectedAction.label"
               menubarPath="repository"
               tooltip="%SynchronizeSelectedAction.tooltip">
            <enablement>
                  <not>
                     <objectClass
                           name="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                     </objectClass>
                  </not>
            </enablement>
         </action>

         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.QueryCloneAction"
               enablesFor="org.eclipse.mylyn.internal.tasks.core.RepositoryQuery"
               icon="icons/etool16/query-new.png"
               id="org.eclipse.mylyn.tasks.ui.actions.clone.query"
               label="%QueryCloneAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/clone"
               tooltip="%QueryCloneAction.tooltip">
         </action>
  <action
        class="org.eclipse.mylyn.internal.tasks.ui.actions.CloneTaskAction"
        enablesFor="1"
        icon="icons/etool16/task-new.png"
        id="org.eclipse.mylyn.tasks.ui.actions.task.query"
        label="%CloneTaskAction.label"
        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/clone"
        tooltip="%CloneTaskAction.tooltip">
     <enablement>
<!--        <and> -->
           <objectClass
                 name="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
           </objectClass>
<!--
           <not>
              <objectClass
                    name="org.eclipse.mylyn.internal.tasks.core.LocalTask">
              </objectClass>
           </not>
        </and>
-->
     </enablement>
  </action>

         <action
          	class="org.eclipse.mylyn.internal.tasks.ui.actions.RestoreTaskListAction"
          	icon="icons/etool16/import.png"
          	id="org.eclipse.mylyn.tasks.ui.tasks.restore"
          	label="%RestoreTaskListAction.label"
          	menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/restore"
          	style="push">
    	</action>

         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.ExportAction"
               enablesFor="+"
               icon="icons/etool16/export.png"
               id="org.eclipse.mylyn.tasks.ui.actions.export"
               label="%ExportAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/importexport"
               tooltip="%ExportAction.tooltip">
         </action>
  		
		  <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.ImportAction"
               enablesFor="*"
               icon="icons/etool16/import.png"
               id="org.eclipse.mylyn.tasks.ui.actions.import"
               label="%ImportAction.label"
               menubarPath="org.eclipse.mylyn.tasks.ui.menu.operations/importexport"
               tooltip="%ImportAction.tooltip">
         </action>



  		<action
	        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction:local"
	        enablesFor="*"
	        icon="icons/etool16/task-new.png"
	        id="org.eclipse.mylyn.tasks.ui.new.local.task"
	        definitionId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
	        label="%NewTaskAction.local.label"
	        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/local"
	        tooltip="%NewTaskAction.local.tooltip"/>

  		<action
	        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction"
	        enablesFor="*"
	        icon="icons/etool16/task-new.png"
	        id="org.eclipse.mylyn.tasks.ui.new.repository.task"
	        label="%NewTaskAction.label"
	        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/repository"
	        tooltip="%NewTaskAction.tooltip"/>
	
		<action
              class="org.eclipse.mylyn.internal.tasks.ui.actions.NewQueryAction"
              enablesFor="*"
              icon="icons/etool16/query-new.png"
              id="org.eclipse.mylyn.tasks.ui.new.query"
              menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/repository"
              label="%NewQueryAction.label"
              style="push"
              tooltip="%NewQueryAction.tooltip">
  		</action>
  		
  		<action
          class="org.eclipse.mylyn.internal.tasks.ui.actions.NewSubTaskAction"
          definitionId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
          enablesFor="1"
          icon="icons/etool16/sub-task-new.png"
          id="org.eclipse.mylyn.tasks.ui.new.subtask"
          label="%NewSubTaskAction.label"
          menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/afterRepository"
          tooltip="%NewSubTaskAction.tooltip">
     <enablement>
           <objectClass
                 name="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
           </objectClass>
     </enablement>
  </action>
  		
  <menu
        id="org.eclipse.mylyn.tasks.ui.menu.new"
        label="%menu.new.label"
        path="new">
     <separator
           name="repository">
     </separator>
     <groupMarker
           name="afterRepository">
     </groupMarker>
     <separator
           name="clone">
     </separator>
     <separator
           name="local">
     </separator>

  </menu>

  <menu
        id="org.eclipse.mylyn.tasks.ui.menu.operations"
        label="%menu.operations.label"
        path="operations">
    <separator
           name="clone">
    </separator>
    <separator
           name="import">
    </separator>
	<separator
           name="export">
    </separator>
  </menu>


  <!--<action
        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewLocalTaskAction"
        icon="icons/etool16/task-new.png"
        id="org.eclipse.mylyn.tasks.ui.actions.new.task"
        label="Task"
        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/local"
        style="push"
        tooltip="New Task">
  </action>-->
  <action
        class="org.eclipse.mylyn.internal.tasks.ui.actions.NewCategoryAction"
        icon="icons/etool16/category-new.png"
        id="org.eclipse.mylyn.tasks.ui.actions.new.category"
        label="%NewCategoryAction.label"
        menubarPath="org.eclipse.mylyn.tasks.ui.menu.new/local"
        tooltip="%NewCategoryAction.tooltip">
  </action>
      </viewerContribution>
      <viewerContribution
            id="org.eclipse.mylyn.tasks.ui.viewerContribution"
            targetID="org.eclipse.mylyn.tasks.ui.views.repositories">
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.RefreshRepositoryTasksAction"
               icon="icons/etool16/repository-synchronize.png"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%RefreshRepositoryTasksAction.label"
               menubarPath="repository"
               style="push"
               tooltip="%RefreshRepositoryTasksAction.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="hasRepository" value="true"/>
              </and>
            </enablement>
         </action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenRepositoryTaskAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
               icon="icons/etool16/open-repository-task.png"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%OpenRepositoryTask.label"
               menubarPath="repository"
               style="push"
               tooltip="%OpenRepositoryTask.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="hasRepository" value="true"/>
              </and>
            </enablement>
         </action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.NewQueryAction:skipFirstPage"
               enablesFor="*"
               icon="icons/etool16/query-new.png"
               id="org.eclipse.mylyn.tasks.ui.new.query"
               label="%NewQueryAction.skipFirstPage.label"
               menubarPath="repository"
               style="push"
               tooltip="%NewQueryAction.skipFirstPage.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="supportQuery" value="true"/>
              </and>
            </enablement>
         </action>
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.NewTaskAction:skipFirstPage"
               enablesFor="*"
               icon="icons/etool16/task-new.png"
               id="org.eclipse.mylyn.tasks.ui.new.repository.task"
               label="%NewTaskAction.skipFirstPage.label"
               menubarPath="repository"
               tooltip="%NewTaskAction.skipFirstPage.tooltip">
            <enablement>
              <and>
                <objectState name="offline" value="false"/>
                <objectState name="supportNewTask" value="true"/>
              </and>
            </enablement>
         </action>
      </viewerContribution>

      <objectContribution
            adaptable="false"
            id="org.eclipse.mylyn.tasks.ui.contribution.attachment.compare"
            objectClass="org.eclipse.mylyn.tasks.core.ITaskAttachment">
         <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.CompareAttachmentsAction"
               enablesFor="2"
               icon="icons/etool16/compare.png"
               id="org.eclipse.mylyn.tasks.ui.action.attachment.compare"
               label="%CompareAttachmentsAction.label"
               menubarPath="actions"
               tooltip="%CompareAttachmentsAction.tooltip"/>
      </objectContribution>

   </extension>

   <extension
   		point="org.eclipse.ui.keywords">
      <keyword
            label="%keywords.label"
            id="org.eclipse.mylyn.tasks.ui.keywords"/>
   </extension>

  <extension point="org.eclipse.ui.preferencePages">
	  <page
            name="Mylyn"
            class="org.eclipse.mylyn.internal.tasks.ui.preferences.MylynPreferencePage"
            id="org.eclipse.mylyn.preferencePages.Mylyn">
            <keywordReference
            	id="org.eclipse.mylyn.tasks.ui.keywords"/>
      </page>
	  <page
	  		category="org.eclipse.mylyn.preferencePages.Mylyn"
            name="%preferencePages.name"
            class="org.eclipse.mylyn.internal.tasks.ui.preferences.TasksUiPreferencePage"
            id="org.eclipse.mylyn.tasks.ui.preferences">
            <keywordReference
            	id="org.eclipse.mylyn.tasks.ui.keywords"/>
      </page>
   </extension>
    <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.eclipse.mylyn.preferencePages.Mylyn"
            class="org.eclipse.mylyn.internal.tasks.ui.preferences.NotificationsLinkPreferencesPage"
            id="org.eclipse.mylyn.commons.notifications.preferencePages.LinkNotifications"
            name="%Notifications.name">
      </page>
   </extension>

  <extension point="org.eclipse.ui.bindings">
      <key
            sequence="M2+M3+Q K"
            commandId="org.eclipse.ui.views.showView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
            <parameter
            	id="org.eclipse.ui.views.showView.viewId"
            	value="org.eclipse.mylyn.tasks.ui.views.tasks"/>
      </key>
      <key
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+Q K">
      </key>
      <key
            commandId="org.eclipse.ui.views.showView"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="COMMAND+ALT+Q K">
         <parameter
               id="org.eclipse.ui.views.showView.viewId"
               value="org.eclipse.mylyn.tasks.ui.views.tasks">
         </parameter>
      </key>
      <key
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+Q K">
      </key>
      <key
            commandId="org.eclipse.ui.views.showView"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="COMMAND+ALT+Q K">
         <parameter
               id="org.eclipse.ui.views.showView.viewId"
               value="org.eclipse.mylyn.tasks.ui.views.tasks">
         </parameter>
      </key>
     <key
           commandId="org.eclipse.mylyn.task.ui.editor.QuickOutline"
           contextId="org.eclipse.mylyn.tasks.ui.editors.task"
           schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
           sequence="M1+O">
      </key>
   </extension>

   <extension
         point="org.eclipse.ui.themes">
      <themeElementCategory
           id="org.eclipse.mylyn.tasks.ui.presentation"
           label="%themeElementCategory.label"/>

	 <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.today.scheduled"
           isEditable="true"
           label="%colors.foreground.today.scheduled.label"
           value="32,21,223">
         <description>
            %colors.foreground.today.scheduled.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.overdue.for.others"
           isEditable="true"
           label="%colors.foreground.overdue.for.others.label"
           value="128,0,0">
         <description>
            %colors.foreground.past.scheduled.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.past.scheduled"
           isEditable="true"
           label="%colors.foreground.past.scheduled.label"
           value="32,21,223">
         <description>
            %colors.foreground.past.scheduled.description
         </description>
     </colorDefinition>

	 <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.past.due"
           isEditable="true"
           label="%colors.foreground.past.due.label"
           value="198,4,38">
         <description>
            %colors.foreground.past.due.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.thisweek.scheduled"
           isEditable="true"
           label="%colors.foreground.thisweek.scheduled.label"
           value="0,0,0">
         <description>
            %colors.foreground.thisweek.scheduled.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.today.completed"
           isEditable="true"
           label="%colors.foreground.today.completed.label"
           value="107,169,128">
         <description>
            %colors.foreground.today.completed.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.completed"
           isEditable="true"
           label="%colors.foreground.completed.label"
           value="128,128,128">
         <description>
            %colors.foreground.completed.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.incoming.background"
           isEditable="true"
           label="%colors.incoming.background.label"
           value="225,236,255">
         <description>
            %colors.incoming.background.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.category.gradient.start"
           isEditable="true"
           label="%colors.category.gradient.start.label"
           value="240,240,240">
         <description>
            %colors.category.gradient.start.description
         </description>
     </colorDefinition>

     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.category.gradient.end"
           isEditable="true"
           label="%colors.category.gradient.end.label"
           value="220,220,220"> <!-- was all 220, 234,233,237 -->
         <description>
            %colors.category.gradient.end.description
         </description>
     </colorDefinition>
     <colorDefinition
           categoryId="org.eclipse.mylyn.tasks.ui.presentation"
           id="org.eclipse.mylyn.tasks.ui.colors.foreground.task.active"
           isEditable="true"
           label="%colors.foreground.task.active.label"
           value="36, 22, 50">
         <description>
            %colors.foreground.task.active.description
         </description>
     </colorDefinition>

	<fontDefinition
       categoryId="org.eclipse.mylyn.tasks.ui.presentation"
       id="org.eclipse.mylyn.tasks.ui.fonts.task.editor.comment"
       isEditable="true"
       label="%fonts.task.editor.comment.label"
       value="org.eclipse.jface.dialogfont">
	     <fontValue
            ws="win32"
            value="Tahoma-regular-10">
         </fontValue>
           <fontValue
           		os="linux"
                value="sans-serif-regular-10"/>
           <fontValue
           		os="macosx"
                value="Lucida Grande-regular-11"/>
         <description>
            %fonts.task.editor.comment.description
         </description>
      </fontDefinition>
   </extension>
   <!-- defaultsTo="org.eclipse.jface.dialogfont"-->

   <extension
         point="org.eclipse.e4.ui.css.swt.theme">
      <stylesheet
            uri="css/e4-dark_mylyn_prefstyle.css">
         <themeid
               refid="org.eclipse.e4.ui.css.theme.e4_dark">
         </themeid>
      </stylesheet>
   </extension>

   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.eclipse.mylyn.internal.tasks.ui.PlanningPerspectiveFactory"
            fixed="false"
            icon="icons/eview16/perspective-planning.png"
            id="org.eclipse.mylyn.tasks.ui.perspectives.planning"
            name="%PlanningPerspectiveFactory.name"/>
   </extension>


   <extension point="org.eclipse.mylyn.tasks.ui.actions">
      <dynamicPopupMenu
            class="org.eclipse.mylyn.internal.tasks.ui.ScheduleTaskMenuContributor"
            menuPath="new"/>
      <dynamicPopupMenu
            class="org.eclipse.mylyn.internal.tasks.ui.MoveToCategoryMenuContributor"
            menuPath="tasks"/>
   </extension>

   <extension
         point="org.eclipse.mylyn.tasks.ui.editors">
      <pageFactory
            class="org.eclipse.mylyn.internal.tasks.ui.editors.PlanningPageFactory"
            id="org.eclipse.mylyn.tasks.ui.pageFactory.Planning">
      </pageFactory>
   </extension>

   <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="org.eclipse.mylyn.tasks.ui.navigation"
            label="%actionSet.navigation.label"
            visible="true">
		<action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.DeactivateAllTasksAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.deactivateAllTasks"
               icon="icons/etool16/task-inactive-centered.png"
               id="org.eclipse.mylyn.tasks.ui.deactivateAllTasks"
               label="%DeactivateAllTasksAction.label"
               menubarPath="navigate/open.ext3"
               style="push"/>
		<action
        	class="org.eclipse.mylyn.internal.tasks.ui.actions.ActivateTaskDialogAction"
        	definitionId="org.eclipse.mylyn.tasks.ui.command.activateTask"
        	icon="icons/etool16/task-active-centered.png"
        	id="org.eclipse.mylyn.tasks.ui.switchTask"
        	label="%ActivateTaskDialogAction.label"
        	menubarPath="navigate/open.ext3"
        	style="push"/>
        <action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenTaskAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.openTask"
               icon="icons/etool16/open-task.png"
               id="org.eclipse.mylyn.tasks.ui.openTask"
               label="%OpenTaskAction.label"
               menubarPath="navigate/open.ext3"
               style="push"
               toolbarPath="org.eclipse.search.searchActionSet/Search"
               tooltip="%OpenTaskAction.tooltip"/>
       </actionSet>
   </extension>

   <extension point="org.eclipse.ui.commands">
      <command id="org.eclipse.mylyn.tasks.ui.command.previousTask"
               defaultHandler="org.eclipse.mylyn.internal.tasks.ui.TaskHistoryHandler"
               name="%command.previousTask.name"/>
      <command
            name="Quick Outline"
            description="Show the quick outline for the editor input"
            id="org.eclipse.mylyn.task.ui.editor.QuickOutline"
            categoryId="org.eclipse.mylyn.tasks.ui.commands"/>
   </extension>
   <extension point="org.eclipse.ui.handlers">
		<handler
        class="org.eclipse.mylyn.internal.tasks.ui.editors.outline.ShowQuickOutlineHandler"
        commandId="org.eclipse.mylyn.task.ui.editor.QuickOutline">
     <activeWhen>
          	<with variable="activePartId">
	               <equals
	                     value="org.eclipse.mylyn.tasks.ui.editors.task"/>
         	</with>
     </activeWhen>
  </handler>
	</extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="menu:navigate?after=showIn">
       <command
             commandId="org.eclipse.mylyn.task.ui.editor.QuickOutline"
             label="Quick Outline"
             style="push">
          <visibleWhen>
          	<with variable="activeContexts">
	            <iterate operator="or">
	               <equals
	                     value="org.eclipse.mylyn.tasks.ui.editors.task"/>
	            </iterate>
         	</with>
          </visibleWhen>
       </command>
    </menuContribution>
 </extension>

  <!-- command-based implementation of the previousTask/history dropdown,
       the problem is that it doesn't work well with the actionSet
  <extension point="org.eclipse.ui.menus">
    <menuContribution locationURI="menu:org.eclipse.mylyn.tasks.ui.previous.task">
      <dynamic
         class="org.eclipse.mylyn.internal.tasks.ui.TaskHistoryDropDown"
         id="org.eclipse.mylyn.tasks.ui.previous.task.dropdown"/>
    </menuContribution>
  </extension>

  <extension point="org.eclipse.ui.menus">
    <menuContribution locationURI="toolbar:org.eclipse.ui.workbench.navigate">
        <command id="org.eclipse.mylyn.tasks.ui.previous.task"
                 commandId="org.eclipse.mylyn.tasks.ui.command.previousTask"
                 icon="icons/etool16/navigate-previous.png"
                 label="Activate Previous Task"
                 tooltip="Activate Previous Task"
                 style="pulldown">
          <visibleWhen>
            <with variable="activeContexts">
              <iterate operator="or">
                <equals value="org.eclipse.mylyn.tasks.ui.navigation.additions"/>
              </iterate>
            </with>
          </visibleWhen>
        </command>
    </menuContribution>
  </extension>
  -->

   <extension point="org.eclipse.ui.actionSets">
      <actionSet
            id="org.eclipse.mylyn.tasks.ui.navigation.additions"
            label="%actionSet.navigation.additions.label"
            visible="false">
  		<action
	          allowLabelUpdate="true"
	          class="org.eclipse.mylyn.internal.tasks.ui.actions.ActivateTaskHistoryDropDownAction"
	          icon="icons/etool16/navigate-previous.png"
	          id="org.eclipse.mylyn.tasks.ui.navigate.task.history"
	          label="%ActivateTaskHistoryDropDownAction.label"
	          style="pulldown"
	          toolbarPath="org.eclipse.ui.workbench.navigate/Tasks"
	          tooltip="%ActivateTaskHistoryDropDownAction.tooltip">
      	</action>
      	<action
               class="org.eclipse.mylyn.internal.tasks.ui.actions.OpenRepositoryTaskAction"
               definitionId="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
               icon="icons/etool16/open-repository-task.png"
               id="org.eclipse.mylyn.tasks.ui.open.task.remote"
               label="%OpenRepositoryTask.label"
               menubarPath="navigate/open.ext3"
               style="push"
               tooltip="%OpenRepositoryTask.tooltip"/>
      </actionSet>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.openTask"
            name="%ommand.openTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.OpenRepositoryTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
            name="%command.openRemoteTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.activateTask"
            name="%command.activateTask.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.deactivateAllTasks"
            name="%command.deactivateAllTasks.name"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.activateSelectedTask"
            name="Activate Selected Task"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.ActivateTaskHandler"/>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            id="org.eclipse.mylyn.tasks.ui.command.deactivateSelectedTask"
            name="Deactivate Selected Task"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.DeactivateTaskHandler"/>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F12"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openTask"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+F12">
      </key>
      <key
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F12">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openTask"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+F12">
      </key>
      <key
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F12">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openRemoteTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+M3+F12"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.activateTask"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+F9"/>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.deactivateAllTasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+F9"/>
   </extension>

    <extension
          point="org.eclipse.ui.propertyPages">
       <page
             class="org.eclipse.mylyn.internal.tasks.ui.properties.ProjectTaskRepositoryPage"
             id="org.eclipse.mylyn.tasks.ui.properties.pages.project.repository"
             name="%ProjectTaskRepositoryPage.name">
          <enabledWhen>
             <adapt
                   type="org.eclipse.core.resources.IProject">
             </adapt>
          </enabledWhen>
          <filter name="open" value="true"/>
       </page>
    </extension>
    <extension
          point="org.eclipse.ui.commands">
       <category
             id="org.eclipse.mylyn.tasks.ui.commands"
             name="%commands.category.repositories.name">
       </category>
       <command
             categoryId="org.eclipse.mylyn.tasks.ui.commands"
             defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.AddTaskRepositoryHandler"
             id="org.eclipse.mylyn.tasks.ui.command.addTaskRepository"
             name="%command.addTaskRepository.name">
          <commandParameter
                id="connectorKind"
                name="%command.addTaskRepository.commandParameter.name"
                optional="true"
                values="org.eclipse.mylyn.internal.tasks.ui.commands.TaskRepositoryParameterValues">
          </commandParameter>
       </command>
       <command
             categoryId="org.eclipse.mylyn.tasks.ui.commands"
             defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.SynchronizeAllHandler"
             id="org.eclipse.mylyn.tasks.ui.command.SynchronizeAll"
             name="%SynchronizeAllAction.label">
       </command>
    </extension>
    <extension
          point="org.eclipse.mylyn.tasks.ui.projectLinkProviders">
       <linkProvider
             class="org.eclipse.mylyn.internal.tasks.ui.properties.ProjectPropertiesLinkProvider"
             name="%ProjectPropertiesLinkProvider.name"
             order="1000"
             id="org.eclipse.mylyn.tasks.ui.defaultRepositoryLinkProvider">
       </linkProvider>
    </extension>

   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
      <hyperlinkDetector
            class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskHyperlinkDetector"
            id="org.eclipse.mylyn.tasks.ui.hyperlinks.detectors.task"
            name="%TaskHyperlinkDetector.name"
            targetId="org.eclipse.ui.DefaultTextEditor">
      </hyperlinkDetector>
      <hyperlinkDetector
            class="org.eclipse.mylyn.internal.tasks.ui.editors.MultipleTaskHyperlinkDetector"
            id="org.eclipse.mylyn.tasks.ui.hyperlinks.detectors.task.multiple"
            name="%TaskHyperlinkDetector.name"
            modifierKeys="Ctrl"
            targetId="org.eclipse.mylyn.tasks.ui.TaskEditor">
      </hyperlinkDetector>
      <hyperlinkDetector
            class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskUrlHyperlinkDetector"
            description="%TaskUrlHyperlinkDetector.description"
            id="org.eclipse.mylyn.tasks.ui.hyperlinks.detectors.url"
            name="%TaskUrlHyperlinkDetector.name"
            targetId="org.eclipse.ui.DefaultTextEditor">
      </hyperlinkDetector>
   </extension>

	<extension
		point="org.eclipse.ui.workingSets">
		<workingSet
        elementAdapterClass="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetElementAdapter"
        icon="icons/obj16/workingSet.png"
        id="org.eclipse.mylyn.tasks.ui.workingSet"
        name="%TaskWorkingSetElementAdapter.name"
        pageClass="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetPage"
        updaterClass="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetUpdater"/>
	</extension>

 <extension point="org.eclipse.core.runtime.adapters">
    <factory
          adaptableType="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer"
          class="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetAdapterFactory">
       <adapter type="org.eclipse.ui.IPersistableElement"/>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.core.TaskRepository"
          class="org.eclipse.mylyn.internal.tasks.ui.TaskRepositoryAdapterFactory">
       <adapter type="org.eclipse.ui.IActionFilter"/>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.ui.editors.TaskEditor"
          class="org.eclipse.mylyn.internal.tasks.ui.TasksAdapterFactory">
       <adapter
             type="org.eclipse.mylyn.tasks.core.ITask">
       </adapter>
       <adapter
             type="org.eclipse.mylyn.tasks.core.TaskRepository">
       </adapter>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.ui.editors.TaskEditorInput"
          class="org.eclipse.mylyn.internal.tasks.ui.TasksAdapterFactory">
       <adapter
             type="org.eclipse.mylyn.tasks.core.ITask">
       </adapter>
       <adapter
             type="org.eclipse.mylyn.tasks.core.TaskRepository">
       </adapter>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.core.ITaskAttachment"
          class="org.eclipse.mylyn.internal.tasks.ui.TasksAdapterFactory">
       <adapter
             type="org.eclipse.mylyn.tasks.core.ITask">
       </adapter>
       <adapter
             type="org.eclipse.mylyn.tasks.core.TaskRepository">
       </adapter>
    </factory>
    <factory
          adaptableType="org.eclipse.mylyn.tasks.core.ITaskComment"
          class="org.eclipse.mylyn.internal.tasks.ui.TasksAdapterFactory">
       <adapter
             type="org.eclipse.mylyn.tasks.core.ITask">
       </adapter>
       <adapter
             type="org.eclipse.mylyn.tasks.core.TaskRepository">
       </adapter>
    </factory>
     <factory
          adaptableType="org.eclipse.mylyn.tasks.core.ITaskAttachment"
          class="org.eclipse.mylyn.internal.tasks.ui.TaskAttachmentAdapterFactory">
       <adapter type="org.eclipse.ui.IActionFilter"/>
    </factory>
 </extension>

 <extension
       point="org.eclipse.ui.elementFactories">
    <factory
          class="org.eclipse.mylyn.internal.tasks.ui.workingsets.TaskWorkingSetElementFactory"
          id="org.eclipse.mylyn.tasks.ui.workingSets.elementFactory">
    </factory>
</extension>
   <extension
         id="org.eclipse.mylyn.tasks.local.repository"
         name="%local.repository.name"
         point="org.eclipse.mylyn.tasks.ui.repositories">
      <connectorCore
            id="local"
            class="org.eclipse.mylyn.internal.tasks.core.LocalRepositoryConnector"
            name="%LocalRepositoryConnector.name"/>
      <connectorUi
            brandingIcon="icons/etool16/person.png"
            class="org.eclipse.mylyn.internal.tasks.ui.LocalRepositoryConnectorUi"
            name="%LocalRepositoryConnectorUi.name"
            overlayIcon="icons/ovr16/overlay-local.png"/>
      <repositoryMigrator
            class="org.eclipse.mylyn.internal.tasks.ui.LocalRepositoryMigrator">
      </repositoryMigrator>
   </extension>

   <extension point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectorTargets">
     <target id="org.eclipse.mylyn.tasks.ui.TaskEditor" name="%hyperlinkDetectorTargets.name"/>
   </extension>

   <extension point="org.eclipse.mylyn.tasks.ui.presentations">
      <presentation
            class="org.eclipse.mylyn.internal.tasks.ui.CategorizedPresentation"
            icon="icons/etool16/presentation-categorized.png"
            id="org.eclipse.mylyn.tasks.ui.categorized"
            name="%CategorizedPresentation.name"
            primary="true"/>
      <presentation
            class="org.eclipse.mylyn.internal.tasks.ui.ScheduledPresentation"
            icon="icons/etool16/presentation-scheduled.png"
            id="org.eclipse.mylyn.tasks.ui.scheduled"
            name="%ScheduledPresentation.name"
            primary="true"/>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.navigate"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.GoToUnreadTaskHandler$GoToPreviousUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.goToPreviousUnread"
            name="%command.goToPreviousUnread.name">
      </command>
      <command
            categoryId="org.eclipse.ui.category.navigate"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.GoToUnreadTaskHandler$GoToNextUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.goToNextUnread"
            name="%command.goToNextUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.TaskListToolTipHandler"
            id="org.eclipse.mylyn.tasks.ui.command.showToolTip"
            name="%command.showToolTip.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskReadHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
            name="%command.markTaskRead.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskUnreadHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
            name="%command.markTaskUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskReadGoToNextUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToNextUnread"
            name="%command.markTaskReadGoToNextUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskReadGoToPreviousUnreadTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToPreviousUnread"
            name="%command.markTaskReadGoToPreviousUnread.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
            name="%command.markTaskComplete.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
            name="%command.markTaskIncomplete.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.task.clearOutgoing"
            name="%command.task.clearOutgoing.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            id="org.eclipse.mylyn.tasks.ui.command.task.clearActiveTime"
            name="Clear Active Time">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.NewSubTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            name="%command.new.subtask.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.NewLocalTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            name="%command.new.local.task.name">
      </command>

      <category
            id="org.eclipse.mylyn.tasks.ui.commands"
            name="%commands.category.name">
      </category>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.OpenSelectedTaskHandler"
            id="org.eclipse.mylyn.tasks.ui.command.openSelectedTask"
            name="%command.openSelectedTask.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            id="org.eclipse.mylyn.tasks.ui.command.attachment.open"
            name="%command.attachment.open.name">
      </command>
      <category
            id="org.eclipse.mylyn.tasks.ui.category.editor"
            name="%commands.category.editor.name">
      </category>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.SubmitTaskHandler"
            description="%command.submitTask.description"
            id="org.eclipse.mylyn.tasks.ui.command.submitTask"
            name="%command.submitTask.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.goToPreviousUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+ARROW_UP">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.goToNextUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+ARROW_DOWN">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.showToolTip"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F4">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+R">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+R">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+U">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+U">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToNextUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+ARROW_DOWN">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskReadGoToPreviousUnread"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+ARROW_UP">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+INSERT">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="INSERT">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.openSelectedTask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+ENTER">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+C">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+C">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+I">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+I">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.submitTask"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+S">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+N">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+N">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.subtask"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+N">
      </key>
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.new.local.task"
            contextId="org.eclipse.mylyn.tasks.ui.views.tasks"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+N">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="org.eclipse.mylyn.tasks.ui.views.tasks"
            name="%context.views.tasks.name"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>


	<extension point="org.eclipse.ui.navigator.navigatorContent">
		<commonFilter
			id="org.eclipse.mylyn.tasks.ui.navigator.filters.tasks"
			name="%filters.tasks.name"
			description="%filters.tasks.description"
			activeByDefault="true">
			<filterExpression>
				<instanceof
					value="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer" />
			</filterExpression>
		</commonFilter>
   </extension>
   <extension point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding
			viewerId="org.eclipse.ui.navigator.ProjectExplorer">
			<includes>
				<contentExtension
					pattern="org.eclipse.mylyn.tasks.ui.navigator.filters.tasks" />
			</includes>
		</viewerContentBinding>
	</extension>

    <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskListElementPropertiesHandler"
            commandId="org.eclipse.ui.file.properties">
         <activeWhen>
			<with variable="activePartId">
			    <equals value="org.eclipse.mylyn.tasks.ui.views.tasks"/>
			</with>
         </activeWhen>
         <enabledWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <or>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.RepositoryQuery">
                     </instanceof>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.TaskCategory">
                     </instanceof>
                  </or>
               </iterate>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskRepositoryPropertiesHandler"
            commandId="org.eclipse.ui.file.properties">
         <activeWhen>
         	<or>
				<with variable="activePartId">
				    <equals value="org.eclipse.mylyn.tasks.ui.views.repositories"/>
				</with>
				<with variable="activePartId">
				    <equals value="org.eclipse.mylyn.commons.repositories.ui.navigator.Repositories"/>
				</with>
			</or>
         </activeWhen>
         <enabledWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <and>
                     <instanceof
                           value="org.eclipse.mylyn.tasks.core.TaskRepository">
                     </instanceof>
                     <or>
                  	   <test
        	           		forcePluginActivation="true"
    	                    property="org.eclipse.mylyn.taskRepository.userManaged"
	                        value="true">
                    	 </test>
                        <test
                              forcePluginActivation="true"
                              property="org.eclipse.mylyn.taskRepository.connectorKind"
                              value="local">
                        </test>
                     </or>
                  </and>
               </iterate>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskAttachmentHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.attachment.open">
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskCompleteHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <adapt
                        type="org.eclipse.mylyn.tasks.core.ITask">
                     <test
                           property="org.eclipse.mylyn.task.isCompleted"
                           value="false">
                     </test>
                     <test
                           property="org.eclipse.mylyn.task.hasLocalCompletionState"
                           value="true">
                     </test>
                  </adapt>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$MarkTaskIncompleteHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <adapt
                        type="org.eclipse.mylyn.tasks.core.ITask">
                     <test
                           property="org.eclipse.mylyn.task.isCompleted"
                           value="true">
                     </test>
                     <test
                           property="org.eclipse.mylyn.task.hasLocalCompletionState"
                           value="true">
                     </test>
                  </adapt>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$ClearOutgoingHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.task.clearOutgoing">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <adapt
                        type="org.eclipse.mylyn.tasks.core.ITask">
                     <test
                           property="org.eclipse.mylyn.task.hasEdits"
                           value="true">
                     </test>
                  </adapt>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.MarkTaskHandler$ClearActiveTimeHandler"
            commandId="org.eclipse.mylyn.tasks.ui.command.task.clearActiveTime">
         <enabledWhen>
            <iterate
                  operator="or">
               <and>
                  <adapt
                        type="org.eclipse.mylyn.tasks.core.ITask">
                     <test
                           property="org.eclipse.mylyn.task.hasActiveTime"
                           value="true">
                     </test>
                  </adapt>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
       <menuContribution
			locationURI="popup:org.eclipse.mylyn.tasks.ui.editors.task?after=additions">
	   		<command
	         commandId="org.eclipse.mylyn.tasks.ui.viewSource.command"
	         id="org.eclipse.mylyn.sandbox.ui.viewSource"
	         label="View Unformatted Text"
	         style="toggle">
	      	<visibleWhen
	        	    checkEnabled="true">
	      	</visibleWhen>
	   	</command>
	   </menuContribution>

      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.views.tasks?after=properties">
         <command
               commandId="org.eclipse.ui.file.properties"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.views.repositories?after=properties">
         <command
               commandId="org.eclipse.ui.file.properties"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.editor.menu.attachments?after=group.open">
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.attachment.open"
               label="%command.attachment.open.label"
               mnemonic="O"
               style="push">
         </command>
         <menu
               label="%command.attachment.openWith.menu.label"
               mnemonic="H">
            <dynamic
                  class="org.eclipse.mylyn.internal.tasks.ui.commands.OpenTaskAttachmentWithMenu"
                  id="org.eclipse.mylyn.tasks.ui.command.attachment.openTaskAttachmentWithMenu">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="selection">
                        <count
                              value="1">
                        </count>
                     </with>
                  </visibleWhen>
            </dynamic>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=navigate">
         <menu
               id="org.eclipse.mylyn.tasks.ui.menu.task.mark"
               label="%menu.task.mark.label">
            <visibleWhen
                  checkEnabled="false">
          		<or>
	               <with variable="activePartId">
	                	<equals value="org.eclipse.mylyn.tasks.ui.editors.task" />
				   </with>
	               <iterate
	                     ifEmpty="false">
	                  <or>
	                     <adapt
	                           type="org.eclipse.mylyn.tasks.core.ITask">
	                     </adapt>
	                     <instanceof
	                           value="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer">
	                     </instanceof>
	                  </or>
	               </iterate>
				</or>		
            </visibleWhen>
            <separator
                  name="group.taskStatus"
                  visible="true">
            </separator>
            <separator
                  name="group.synchronizationStatus"
                  visible="true">
            </separator>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.markTaskRead"
                  label="%command.markTaskRead.label"
                  mnemonic="R"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="org.eclipse.mylyn.tasks.ui.expressions.repositoryElements">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.markTaskUnread"
                  label="%command.markTaskUnread.label"
                  mnemonic="U"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="org.eclipse.mylyn.tasks.ui.expressions.repositoryElements">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.task.clearOutgoing"
                  label="%command.task.clearOutgoing.label"
                  mnemonic="C"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <iterate>
                     <not>
                        <adapt
                              type="org.eclipse.mylyn.tasks.core.ITask">
                           <instanceof
                                 value="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                           </instanceof>
                        </adapt>
                     </not>
                  </iterate>
               </visibleWhen>
            </command>
			<separator
                  name="group.timeTracking"
                  visible="true">
            </separator>
            <command
                  commandId="org.eclipse.mylyn.tasks.ui.command.task.clearActiveTime"
                  label="Clear Active Time..."
                  mnemonic="T"
                  style="push">
               <visibleWhen
                     checkEnabled="true"/>
            </command>
            <separator
                  name="additions">
            </separator>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.mylyn.tasks.ui.menu.task.mark?after=group.taskStatus">
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.markTaskComplete"
               icon="icons/etool16/task-complete.png"
               label="%command.markTaskComplete.label"
               mnemonic="C"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     operator="or">
                  <and>
                     <adapt
                           type="org.eclipse.mylyn.tasks.core.ITask">
	                     <test
	                           property="org.eclipse.mylyn.task.hasLocalCompletionState"
	                           value="true">
	                     </test>
                     </adapt>
                  </and>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.markTaskIncomplete"
               icon="icons/etool16/task-incomplete.png"
               label="%command.markTaskIncomplete.label"
               mnemonic="I"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     operator="or">
                  <and>
                     <instanceof
                           value="org.eclipse.mylyn.internal.tasks.core.AbstractTask">
                     </instanceof>
                     <test
                           property="org.eclipse.mylyn.task.hasLocalCompletionState"
                           value="true">
                     </test>
                  </and>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:goTo">
         <separator
               name="group.taskList"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.goToPreviousUnread"
               label="%command.goToPreviousUnread.label"
               mnemonic="P"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeContexts">
                  <iterate
                        operator="or">
                     <equals
                           value="org.eclipse.mylyn.tasks.ui.views.tasks">
                     </equals>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.mylyn.tasks.ui.command.goToNextUnread"
               label="%command.goToNextUnread.label"
               mnemonic="N"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeContexts">
                  <iterate
                        operator="or">
                     <equals
                           value="org.eclipse.mylyn.tasks.ui.views.tasks">
                     </equals>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskPropertyTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.task"
            namespace="org.eclipse.mylyn.task"
            properties="canGetAttachment,canGetHistory,canPostAttachment,connectorKind,hasActiveTime,hasEdits,hasLocalContext,hasLocalCompletionState,hasRepositoryContext,isCompleted,isLocal,isArtifact,"
            type="org.eclipse.mylyn.tasks.core.ITask">
      </propertyTester>
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskAttachmentPropertyTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.task.attachment"
            namespace="org.eclipse.mylyn.task.attachment"
            properties="isContext,hasUrl"
            type="org.eclipse.mylyn.tasks.core.ITaskAttachment">
      </propertyTester>
   </extension>

   <extension
         point="org.eclipse.mylyn.commons.core.errorReporters">
      <errorReporter
            class="org.eclipse.mylyn.internal.tasks.ui.DialogErrorReporter"
            id="org.eclipse.mylyn.tasks.bugs.errorReporter"
            label="%tasks.bugs.errorReporter.label">
      </errorReporter>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.category.editor"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.MaximizePartHandler"
            description="%command.maximizePart.description"
            id="org.eclipse.mylyn.tasks.ui.command.maximizePart"
            name="%command.maximizePart.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.tasks.ui.commands"
            defaultHandler="org.eclipse.mylyn.internal.tasks.ui.commands.ViewSourceHandler"
            id="org.eclipse.mylyn.tasks.ui.viewSource.command"
            name="%commands.ViewSourceHandler.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.mylyn.tasks.ui.command.maximizePart"
            contextId="org.eclipse.mylyn.tasks.ui.editors.task"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+M">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="org.eclipse.mylyn.tasks.ui.editors.task"
            name="%context.editors.task.name"
            parentId="org.eclipse.ui.textEditorScope">
      </context>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskRepositoryPropertyTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.taskRepository"
            namespace="org.eclipse.mylyn.taskRepository"
            properties="connectorKind,userManaged,disconnected"
            type="org.eclipse.mylyn.tasks.core.TaskRepository">
      </propertyTester>
      <propertyTester
            class="org.eclipse.mylyn.internal.tasks.ui.util.TaskPreferenceTester"
            id="org.eclipse.mylyn.tasks.ui.propertyTester.Preferences"
            namespace="org.eclipse.mylyn.tasks.ui.preferences"
            properties="showTrim"
            type="java.lang.Object">
      </propertyTester>
   </extension>
    <extension
          point="org.eclipse.mylyn.tasks.ui.taskRepositoryPageContribution">
       <taskRepositoryPageContribution
       		 id="org.eclipse.mylyn.tasks.ui.taskEditorExtensionSettings"
             class="org.eclipse.mylyn.internal.tasks.ui.editors.TaskEditorExtensionSettingsContribution">
       </taskRepositoryPageContribution>
    </extension>
    <extension
          point="org.eclipse.core.expressions.definitions">
       <definition
             id="org.eclipse.mylyn.tasks.ui.expressions.repositoryElements">
          <iterate>
             <or>
                <and>
                   <instanceof
                         value="org.eclipse.mylyn.internal.tasks.core.AbstractTaskContainer">
                   </instanceof>
                   <not>
                      <instanceof
                            value="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                      </instanceof>
                   </not>
                </and>
                <adapt
                      type="org.eclipse.mylyn.tasks.core.ITask">
                   <not>
                      <instanceof
                            value="org.eclipse.mylyn.internal.tasks.core.LocalTask">
                      </instanceof>
                   </not>
                </adapt>
             </or>
          </iterate>
		</definition>
    </extension>
    <extension
          point="org.eclipse.ui.navigator.viewer">
       <viewerContentBinding
             viewerId="org.eclipse.mylyn.commons.repositories.ui.navigator.Repositories">
          <includes>
             <contentExtension
                   pattern="org.eclipse.mylyn.tasks.ui.navigator.Repositories">
             </contentExtension>
          </includes>
       </viewerContentBinding>
    </extension>
    <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            activeByDefault="true"
            contentProvider="org.eclipse.mylyn.internal.tasks.ui.views.TaskRepositoriesNavigatorContentProvider"
            icon="icons/eview16/repositories.png"
            id="org.eclipse.mylyn.tasks.ui.navigator.Repositories"
            labelProvider="org.eclipse.mylyn.internal.tasks.ui.views.TaskRepositoryLabelProvider"
            name="Task Repositories">
         <possibleChildren>
            <instanceof
                  value="org.eclipse.mylyn.tasks.core.TaskRepository">
            </instanceof>
         </possibleChildren>
         <triggerPoints>
            <instanceof
                  value="org.eclipse.mylyn.commons.repositories.core.RepositoryCategory">
            </instanceof>
         </triggerPoints>
         <commonSorter
               class="org.eclipse.mylyn.internal.tasks.ui.views.TaskRepositoriesSorter">
         </commonSorter>
         <actionProvider
               class="org.eclipse.mylyn.internal.tasks.ui.views.TaskRepositoriesNavigatorActionProvider">
         </actionProvider>
      </navigatorContent>
    </extension>
    <extension
          point="org.eclipse.mylyn.commons.repositories.ui.newWizards">
       <category
             id="org.eclipse.mylyn.tasks.ui.category.Tasks"
             name="Tasks">
       </category>
       <wizard
             category="org.eclipse.mylyn.tasks.ui.category.Tasks"
             class="org.eclipse.mylyn.internal.tasks.ui.wizards.NewRepositoryWizard"
             icon="icons/etool16/repository-new.png"
             id="org.eclipse.mylyn.tasks.ui.wizard.NewTaskRepository"
             name="%TaskRepositoryWizard.name">
          <description>
             %TaskRepositoryWizard.description
          </description>
       </wizard>
       <primaryWizard
             id="org.eclipse.mylyn.tasks.ui.wizard.NewTaskRepository">
       </primaryWizard>
    </extension>
 	<extension
       point="org.eclipse.ui.handlers">
       <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.DeleteTaskRepositoryHandler"
            commandId="org.eclipse.ui.edit.delete">
         <activeWhen>
            <and>
               <with
                     variable="activePartId">
                  <equals
                        value="org.eclipse.mylyn.commons.repositories.ui.navigator.Repositories">
                  </equals>
               </with>
               <count
                     value="1">
               </count>
               <iterate>
                  <and>
                     <instanceof
                           value="org.eclipse.mylyn.tasks.core.TaskRepository">
                     </instanceof>
                  </and>
               </iterate>
            </and>
         </activeWhen>
      </handler>
    </extension>

    <!--
    <extension
          point="org.eclipse.mylyn.commons.notifications.notifications">
       <category
             icon="icons/eview16/task-list.png"
             id="org.eclipse.mylyn.tasks.ui.category.Tasks"
             label="Tasks">
       </category>
       <event
             categoryId="org.eclipse.mylyn.tasks.ui.category.Tasks"
             id="org.eclipse.mylyn.tasks.ui.event.TaskDue"
             label="Task Due">
       </event>
       <event
             categoryId="org.eclipse.mylyn.tasks.ui.category.Tasks"
             id="org.eclipse.mylyn.tasks.ui.event.TaskChanged"
             label="Task Changed">
       </event>
    </extension>
    -->

    <extension point="org.eclipse.ui.menus">
	    <!-- menu for pulldown command -->
	    <menuContribution locationURI="menu:org.eclipse.mylyn.tasks.ui.trim">
	      <dynamic
	         class="org.eclipse.mylyn.internal.tasks.ui.TaskHistoryDropDown"
	         id="org.eclipse.mylyn.tasks.ui.trim.dropdown"/>
	    </menuContribution>
	
	    <menuContribution locationURI="toolbar:org.eclipse.ui.trim.command2">
	      <toolbar
             id="org.eclipse.mylyn.tasks.ui.trim.container"
             label="Active Tasks">
	        <command
	            id="org.eclipse.mylyn.tasks.ui.trim"
	            commandId="org.eclipse.mylyn.tasks.ui.command.previousTask"
	            label="Previous Task"
	            icon="icons/etool16/navigate-previous.png"
	            style="pulldown">
		        <visibleWhen checkEnabled="false">
		             <test
		                   forcePluginActivation="true"
		                   property="org.eclipse.mylyn.tasks.ui.preferences.showTrim"
		                   value="true">
		             </test>
		        </visibleWhen>
	        </command>
	
	        <control
	           class="org.eclipse.mylyn.internal.tasks.ui.TaskTrimWidget"
	           id="org.eclipse.mylyn.tasks.ui.trim.control">
		        <visibleWhen checkEnabled="false">
		             <test
		                   forcePluginActivation="true"
		                   property="org.eclipse.mylyn.tasks.ui.preferences.showTrim"
		                   value="true">
		             </test>
		        </visibleWhen>
		     </control>
	      </toolbar>
	    </menuContribution>
	</extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="%commands.discovery.description"
            id="org.eclipse.mylyn.tasks.ui.discoveryWizardCommand"
            name="%commands.discovery.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.mylyn.internal.tasks.ui.commands.ShowTasksConnectorDiscoveryWizardCommandHandler"
            commandId="org.eclipse.mylyn.tasks.ui.discoveryWizardCommand">
         <enabledWhen>
			<with variable="org.eclipse.core.runtime.Platform">
         	<and>
	     		<test
	     			property="org.eclipse.core.runtime.isBundleInstalled" args="org.eclipse.mylyn.discovery.ui"/>
	     		<test
	     			property="org.eclipse.core.runtime.isBundleInstalled" args="org.eclipse.equinox.p2.repository"/>
	     	</and>
	     	</with>
         </enabledWhen>
      </handler>
   </extension>

  <!-- Context related commands and UI contributions -->

   <extension point="org.eclipse.ui.commands">
      <category
            name="%commands.category.name"
            description="%commands.category.description"
            id="org.eclipse.mylyn.context.ui.commands">
      </category>
      <command
            categoryId="org.eclipse.mylyn.context.ui.commands"
            id="org.eclipse.mylyn.context.ui.commands.task.attachContext"
            name="%commands.task.attachContext.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.context.ui.commands"
            id="org.eclipse.mylyn.context.ui.commands.task.retrieveContext"
            name="%commands.task.retrieveContext.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.context.ui.commands"
            id="org.eclipse.mylyn.context.ui.commands.task.copyContext"
            name="%commands.task.copyContext.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.context.ui.commands"
            id="org.eclipse.mylyn.context.ui.commands.task.clearContext"
            name="%commands.task.clearContext.name">
      </command>
      <command
            categoryId="org.eclipse.mylyn.context.ui.commands"
            id="org.eclipse.mylyn.context.ui.commands.attachment.retrieveContext"
            name="%commands.attachment.retrieveContext.name">
      </command>
   </extension>

 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="popup:org.eclipse.ui.popup.any?after=operations">
       <menu
             id="org.eclipse.mylyn.context.ui.menu.task.context"
             label="%menu.task.context.label">
          <visibleWhen
                checkEnabled="false">
            <or>
	            <and>
	                <count
	                      value="+">
	                </count>
	                <iterate>
	                   <adapt
	                         type="org.eclipse.mylyn.tasks.core.ITask">
	                   </adapt>	
	                   <test
	                   	property="org.eclipse.mylyn.task.isArtifact"
	                    value="false">
	                   </test>	
	                </iterate>
	            </and>
	        </or>
          </visibleWhen>
          <separator
                name="group.repository"
                visible="true">
          </separator>
          <command
                commandId="org.eclipse.mylyn.context.ui.commands.task.attachContext"
                icon="icons/etool16/context-attach.png"
                label="%commands.task.attachContext.label"
                style="push">
          </command>
          <command
                commandId="org.eclipse.mylyn.context.ui.commands.task.retrieveContext"
                icon="icons/etool16/context-retrieve.png"
                label="%commands.task.retrieveContext.label"
                style="push">
          </command>
          <separator
                name="group.local"
                visible="true">
          </separator>
          <command
                commandId="org.eclipse.mylyn.context.ui.commands.task.copyContext"
                icon="icons/elcl16/context-transfer.png"
                label="%commands.task.copyContext.label"
                style="push">
          </command>
          <command
                commandId="org.eclipse.mylyn.context.ui.commands.task.clearContext"
                icon="icons/elcl16/context-clear.png"
                label="%commands.task.clearContext.label"
                style="push">
          </command>
          <separator
                name="additions">
          </separator>
       </menu>
    </menuContribution>
    <menuContribution
          locationURI="popup:org.eclipse.ui.popup.any?after=additions">
       <command
             commandId="org.eclipse.mylyn.context.ui.commands.attachment.retrieveContext"
             icon="icons/etool16/context-retrieve.png"
             label="%commands.attachment.retrieveContext.label"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <or>
                <iterate
                      ifEmpty="false">
                   <adapt
                         type="org.eclipse.mylyn.tasks.core.ITaskAttachment">
                      <test
                            property="org.eclipse.mylyn.task.attachment.isContext"
                            value="true">
                      </test>
                   </adapt>
                </iterate>
             </or>
          </visibleWhen>
       </command>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.context.AttachContextHandler"
          commandId="org.eclipse.mylyn.context.ui.commands.task.attachContext">
       <enabledWhen>
           <with variable="selection">
              <count value="1"/>
	          <iterate
	                ifEmpty="false"
	                operator="and">
	             <and>
	                <adapt
	                      type="org.eclipse.mylyn.tasks.core.ITask">
	                   <test
	                         property="org.eclipse.mylyn.task.canPostAttachment"
	                         value="true">
	                   </test>
	                </adapt>
	             </and>
	          </iterate>
	      </with>
       </enabledWhen>
    </handler>
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.context.RetrieveContextHandler"
          commandId="org.eclipse.mylyn.context.ui.commands.task.retrieveContext">
       <enabledWhen>
           <with variable="selection">
              <count value="1"/>
	          <iterate
	                ifEmpty="false"
	                operator="and">
	             <and>
	                <adapt
	                      type="org.eclipse.mylyn.tasks.core.ITask">
	                   <test
	                         property="org.eclipse.mylyn.task.canGetAttachment"
	                         value="true">
	                   </test>
	                   <test
	                         property="org.eclipse.mylyn.task.hasRepositoryContext"
	                         value="true">
	                   </test>
	                </adapt>
	             </and>
	          </iterate>
	      </with>
       </enabledWhen>
    </handler>
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.context.CopyContextHandler"
          commandId="org.eclipse.mylyn.context.ui.commands.task.copyContext">
       <enabledWhen>
           <with variable="selection">
              <count value="1"/>
	          <iterate
	                ifEmpty="false"
	                operator="and">
	             <and>
	                <adapt
	                      type="org.eclipse.mylyn.tasks.core.ITask">
	                   <test
	                         property="org.eclipse.mylyn.task.hasLocalContext"
	                         value="true">
	                   </test>
	                </adapt>
	             </and>
	          </iterate>
	      </with>
       </enabledWhen>
    </handler>
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.context.ClearContextHandler"
          commandId="org.eclipse.mylyn.context.ui.commands.task.clearContext">
       <enabledWhen>
	          <iterate
	                ifEmpty="false"
	                operator="and">
	             <and>
	                <adapt
	                      type="org.eclipse.mylyn.tasks.core.ITask">
	                   <test
	                         property="org.eclipse.mylyn.task.hasLocalContext"
	                         value="true">
	                   </test>
	                </adapt>
	             </and>
	          </iterate>
       </enabledWhen>
    </handler>
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.context.RetrieveContextAttachmentHandler"
          commandId="org.eclipse.mylyn.context.ui.commands.attachment.retrieveContext">
       <enabledWhen>
          <and>
          	  <count value="1"/>
	          <iterate
	                ifEmpty="false"
	                operator="and">
                <instanceof
                      value="org.eclipse.mylyn.tasks.core.ITaskAttachment">
                </instanceof>
	          </iterate>
	      </and>
       </enabledWhen>
    </handler>
 </extension>
 <extension
       point="org.eclipse.mylyn.commons.workbench.urlHandlers">
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.TaskUrlHandler"
          id="org.eclipse.mylyn.tasks.ui.urlHandler.TaskUrlHandler">
    </handler>
 </extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.mylyn.commons.repositories.ui.navigator.Repositories?after=group.edit">
       <command
             commandId="org.eclipse.mylyn.tasks.ui.command.UpdateRepositoryConfiguration"
             label="Update Repository Configuration"
             style="toggle">
          <visibleWhen
                checkEnabled="false">
             <iterate>
                <instanceof
                      value="org.eclipse.mylyn.tasks.core.TaskRepository">
                </instanceof>
             </iterate>
          </visibleWhen>
       </command>
       <separator
             name="org.eclipse.mylyn.tasks.ui.separatorBeforeDisconnected"
             visible="true">
       </separator>
       <command
             commandId="org.eclipse.mylyn.tasks.ui.command.disconnected"
             label="Disconnected"
             style="toggle">
          <visibleWhen
                checkEnabled="false">
             <iterate>
                <instanceof
                      value="org.eclipse.mylyn.tasks.core.TaskRepository">
                </instanceof>
             </iterate>
          </visibleWhen>
       </command>
       <separator
             name="org.eclipse.mylyn.tasks.ui.separatorAfterDisconnected"
             visible="true">
       </separator>
       <command
             commandId="org.eclipse.mylyn.tasks.ui.command.RefreshRepositoryTasks"
             icon="icons/etool16/repository-synchronize.png"
             label="Synchronize All Tasks"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <iterate>
                <instanceof
                      value="org.eclipse.mylyn.tasks.core.TaskRepository">
                </instanceof>
             </iterate>
          </visibleWhen>
       </command>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.commands.UpdateRepositoryConfiguration"
          commandId="org.eclipse.mylyn.tasks.ui.command.UpdateRepositoryConfiguration">
       <activeWhen>
          <iterate>
             <and>
                <instanceof
                      value="org.eclipse.mylyn.tasks.core.TaskRepository">
                </instanceof>
                <not>
                   <test
                         property="org.eclipse.mylyn.taskRepository.connectorKind"
                         value="local">
                   </test>
                </not>
             </and>
          </iterate>
       </activeWhen>
    </handler>
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.commands.DisconnectHandler"
          commandId="org.eclipse.mylyn.tasks.ui.command.disconnected">
       <activeWhen>
          <and>
             <with
                   variable="activePartId">
                <equals
                      value="org.eclipse.mylyn.commons.repositories.ui.navigator.Repositories">
                </equals>
             </with>
             <iterate>
                <and>
                   <instanceof
                         value="org.eclipse.mylyn.tasks.core.TaskRepository">
                   </instanceof>
                   <not>
                      <test
                            property="org.eclipse.mylyn.taskRepository.connectorKind"
                            value="local">
                      </test>
                   </not>
                </and>
             </iterate>
             <or>
             <iterate>
                <and>
                   <instanceof
                         value="org.eclipse.mylyn.tasks.core.TaskRepository">
                   </instanceof>
                   <test
                         property="org.eclipse.mylyn.taskRepository.disconnected"
                         value="true">
                   </test>
                </and>
             </iterate>
             <iterate>
                <and>
                   <instanceof
                         value="org.eclipse.mylyn.tasks.core.TaskRepository">
                   </instanceof>
                   <test
                         property="org.eclipse.mylyn.taskRepository.disconnected"
                         value="false">
                   </test>
                </and>
             </iterate>
             </or>
          </and>
       </activeWhen>
    </handler>
    <handler
          class="org.eclipse.mylyn.internal.tasks.ui.commands.RefreshRepositoryHandler"
          commandId="org.eclipse.mylyn.tasks.ui.command.RefreshRepositoryTasks">
       <activeWhen>
          <and>
             <iterate>
                <and>
                   <instanceof
                         value="org.eclipse.mylyn.tasks.core.TaskRepository">
                   </instanceof>
                   <not>
                      <test
                            property="org.eclipse.mylyn.taskRepository.connectorKind"
                            value="local">
                      </test>
                   </not>
                </and>
             </iterate>
          </and>
       </activeWhen>
    </handler>
 </extension>
 <extension
       point="org.eclipse.ui.commands">
    <command
          id="org.eclipse.mylyn.tasks.ui.command.UpdateRepositoryConfiguration"
          name="Update Repository Configuration">
    </command>
    <command
          id="org.eclipse.mylyn.tasks.ui.command.disconnected"
          name="Disconnected">
        <state
             class="org.eclipse.ui.handlers.RegistryToggleState:false"
             id="org.eclipse.ui.commands.toggleState">
       </state>
    </command>
    <command
          id="org.eclipse.mylyn.tasks.ui.command.RefreshRepositoryTasks"
          name="%SynchronizeAllAction.label">
    </command>
 </extension>
</plugin>
