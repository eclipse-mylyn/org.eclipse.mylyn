<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<?eclipse version="3.0"?>
<plugin>
    <extension-point id="bridges" name="bridges" schema="schema/bridges.exsd"/>

    <extension 
         point="org.eclipse.mylyn.context.core.bridges">
      <structureBridge 
      		class="org.eclipse.mylyn.internal.context.ui.TaskStructureBridge"/> 
   </extension>
   <extension 
         point="org.eclipse.mylyn.context.ui.bridges">
      <uiBridge
            class="org.eclipse.mylyn.internal.context.ui.TaskUiBridge"
            contentType="meta/task"/>
   </extension>   
 
 	<extension
         point="org.eclipse.mylyn.tasks.ui.editors">
      	<editorFactory class="org.eclipse.mylyn.internal.context.ui.editors.ContextEditorFactory"/>
   	</extension>
 
  	<extension point = "org.eclipse.ui.popupMenus">
     <objectContribution
        id="org.eclipse.mylyn.context.ui.actions.interest.contribution"
        objectClass="org.eclipse.mylyn.context.core.IInteractionElement">
     	<action  
  		  	label="Mark Less Interesting" 
	  		tooltip="Mark selected element as uninteresting"
	  		menubarPath="additions" 
	  		id="org.eclipse.mylyn.context.ui.actions.interest.decrement" 
	  		class="org.eclipse.mylyn.internal.context.ui.actions.InterestDecrementAction"
	  		icon="icons/elcl16/interest-decrease.gif"
	  		enablesFor="*"/>
	    <action  
  		  	label="Mark as Landmark" 
	  		tooltip="Make selected element a landmark"
	  		menubarPath="additions" 
	  		id="org.eclipse.mylyn.context.ui.actions.interest.increment" 
	  		class="org.eclipse.mylyn.internal.context.ui.actions.InterestIncrementAction"
	  		icon="icons/elcl16/interest-increase.gif"
	  		enablesFor="*"/>
	 </objectContribution> 
	 
	 <objectContribution
            adaptable="false"
            id="org.eclipse.mylyn.context.ui.task.attachment.contribution"
            objectClass="org.eclipse.mylyn.tasks.core.RepositoryAttachment">
         <action
               class="org.eclipse.mylyn.internal.context.ui.actions.ContextRetrieveAction"
               icon="icons/etool16/context-retrieve.gif"
               id="org.eclipse.mylyn.context.ui.repository.task.retrieve"
               label="Retrieve Context..."
               menubarPath="actions">
         </action>
      </objectContribution>

	 <objectContribution
           adaptable="false"
           id="org.eclipse.mylyn.context.ui.tasks.contribution"
           objectClass="org.eclipse.mylyn.tasks.core.ITask">
		<action
              class="org.eclipse.mylyn.internal.context.ui.actions.ContextClearAction"
              enablesFor="1"
              icon="icons/elcl16/context-clear.gif"
              id="org.eclipse.mylyn.context.ui.task.clear"
              label="Clear Context"
              menubarPath="context"
              tooltip="Clear Context">
        </action>
  		<action
        	class="org.eclipse.mylyn.internal.context.ui.actions.ContextCopyAction"
        	icon="icons/elcl16/context-transfer.gif"
        	id="org.eclipse.mylyn.context.ui.task.copy.context.to"
        	label="Copy Context to..."
        	menubarPath="context"
        	tooltip="Copy Context to...">
  		</action>
	 </objectContribution>
     <objectContribution
           adaptable="false"
           id="org.eclipse.mylyn.ui.tasks.repository.hits..action.contribution"
           objectClass="org.eclipse.mylyn.tasks.core.AbstractRepositoryTask">
        <action
              class="org.eclipse.mylyn.internal.context.ui.actions.ContextRetrieveAction"
              enablesFor="1"
              icon="icons/etool16/context-retrieve.gif"
              id="org.eclipse.mylyn.context.ui.repository.task.retrieve"
              label="Retrieve Context..."
              menubarPath="context">
        </action> 
        <action
              class="org.eclipse.mylyn.internal.context.ui.actions.ContextAttachAction"
              enablesFor="1"
              icon="icons/etool16/context-attach.gif"
              id="org.eclipse.mylyn.context.ui.repository.task.attach"
              label="Attach Context..."
              menubarPath="context">
        </action>
	 </objectContribution>
   </extension>
    
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            name="Context"
            class="org.eclipse.mylyn.internal.context.ui.preferences.ContextUiPreferencePage"
            id="org.eclipse.mylyn.context.ui.preferences"
            category="org.eclipse.mylyn.ui.preferences">
         <keywordReference id="org.eclipse.mylyn.context.keywords"/>
      </page> 
   </extension>
   
   <extension
   		point="org.eclipse.ui.keywords">
      <keyword
            label="mylyn context focus focused"
            id="org.eclipse.mylyn.context.ui.keywords"/>
   </extension>
 
	<!-- ==================== Common Navigator ==================== -->
    <extension
         point="org.eclipse.ui.navigator.viewer">
       <!--
       <viewer
             viewerId="org.eclipse.mylyn.context.ui.navigator.context">
          <popupMenu
                allowsPlatformContributions="false"
                id="org.eclipse.mylyn.context.ui.navigator.context#PopupMenu">  
             <insertionPoint name="group.new"/>
             <insertionPoint
                   	name="group.open"
                   	separator="true"/>
             <insertionPoint 
             		name="group.openWith"/>     
             <insertionPoint
                   name="additions"
                   separator="true"/>              
			 <insertionPoint
                   name="group.port"
                   separator="true"/>  
             <insertionPoint
                   name="group.properties"
                   separator="true"/>
          </popupMenu>
       </viewer>
       -->
       <viewerContentBinding 
             viewerId="org.eclipse.mylyn.context.ui.navigator.context">
          <includes>
       	      <contentExtension pattern="org.eclipse.ui.navigator.resourceContent"/>		       	      
          </includes>
       </viewerContentBinding>
       
       <viewerContentBinding 
             viewerId="org.eclipse.mylyn.context.ui.navigator.context.quick">
          <includes>
       	      <contentExtension pattern="org.eclipse.ui.navigator.resourceContent"/>		       	      
          </includes>
       </viewerContentBinding>
       
       <viewerActionBinding
            viewerId="org.eclipse.mylyn.context.ui.navigator.context">
         <includes>
             <actionExtension pattern="org.eclipse.ui.navigator.resources.*" />
         </includes>
       </viewerActionBinding>
   </extension>	
 
	<!-- ==================== Markers ==================== -->
	
    <extension point="org.eclipse.ui.ide.markerImageProviders">
    <imageprovider 
  		markertype="org.eclipse.mylyn.context.ui.markers.landmark" 
  		icon="icons/elcl16/interest-landmark.gif" 
  		id="org.eclipse.mylyn.context.ui.landmarkMarkerProvider" /> 
   </extension> 
  
  <extension point="org.eclipse.ui.editors.annotationTypes">
  	<type
         markerSeverity="0"
         markerType="org.eclipse.mylyn.context.ui.markers.landmark"
         name="org.eclipse.mylyn.context.ui.markers.landmark.annotation"/> 
  </extension> 
   
  <extension point="org.eclipse.ui.editors.markerAnnotationSpecification">
  	<specification annotationType="org.eclipse.mylyn.context.ui.markers.landmark.annotation" 
  		label="Task Context Landmark" 
  		icon="icons/elcl16/interest-landmark.gif" 
  		textPreferenceKey="landmarkIndication" 
  		textPreferenceValue="false" 
  		highlightPreferenceKey="landmarkHighlighting" 
  		highlightPreferenceValue="true" 
  		contributesToHeader="true" 
  		overviewRulerPreferenceKey="landmarkIndicationInOverviewRuler" 
  		overviewRulerPreferenceValue="true" 
  		verticalRulerPreferenceKey="landmarkIndicationInVerticalRuler" 
  		verticalRulerPreferenceValue="true" 
  		colorPreferenceKey="landmarkIndicationColor" 
  		colorPreferenceValue="255,255,255" 
  		presentationLayer="0" 
  		showInNextPrevDropdownToolbarActionKey="showLandmarkInNextPrevDropdownToolbarAction" 
  		showInNextPrevDropdownToolbarAction="true" /> 
  </extension>
    
   <extension
       	 point="org.eclipse.ui.actionSets">
   	  <actionSet
            label="Task-Focused UI"
            description="Task-Focused UI"
            visible="true"
            id="org.eclipse.mylyn.context.ui.actionSet">
         <action
               class="org.eclipse.mylyn.internal.context.ui.actions.InterestDecrementAction"
               definitionId="org.eclipse.mylyn.context.ui.commands.interest.decrement"
               icon="icons/elcl16/interest-decrease.gif"
               id="org.eclipse.mylyn.context.ui.actions.interest.decrement"
               label="Mark Less Interesting"
               menubarPath="navigate/open.ext2">
         </action>
         <action
               class="org.eclipse.mylyn.internal.context.ui.actions.InterestIncrementAction"
               definitionId="org.eclipse.mylyn.context.ui.commands.interest.increment"
               icon="icons/elcl16/interest-increase.gif"
               id="org.eclipse.mylyn.context.ui.actions.interest.increment"
               label="Mark as Landmark"
               menubarPath="navigate/open.ext2">
         </action>
	
	     <action
               definitionId="org.eclipse.mylyn.context.ui.dialog.show"
               label="Quick Context View"
               class="org.eclipse.mylyn.internal.context.ui.actions.OpenQuickContextPopupDialog"
               menubarPath="navigate/open.ext2"
               id="org.eclipse.mylyn.context.ui.actions.open.context.dialog">
         </action>
      </actionSet>
   </extension>
                              
   <extension point="org.eclipse.ui.commands">
      <category
            name="Task-Focused UI"
            description="Task-Focused UI Commands"
            id="org.eclipse.mylyn.context.ui.commands">
      </category>
      <command
            name="Make Landmark"
            description="Make Landmark"
            id="org.eclipse.mylyn.context.ui.commands.interest.increment"
            categoryId="org.eclipse.mylyn.context.ui.commands">
      </command>
      <command
            name="Make Less Interesting"
            description="Make Less Interesting"
            id="org.eclipse.mylyn.context.ui.commands.interest.decrement"
            categoryId="org.eclipse.mylyn.context.ui.commands">
      </command>
      <command
            defaultHandler="org.eclipse.mylyn.internal.context.ui.commands.FocusViewHandler"
            id="org.eclipse.mylyn.context.ui.commands.focus.view"
            name="Focus View">
         <commandParameter
               id="viewId"
               name="View ID to Focus"
               optional="false">
         </commandParameter>
      </command>
   </extension>
     
   <extension point="org.eclipse.ui.bindings">     
      <key
            sequence="M1+M2+M3+ARROW_UP"
            contextId="org.eclipse.ui.globalScope"
            commandId="org.eclipse.mylyn.context.ui.commands.interest.increment"
            schemeId ="org.eclipse.ui.defaultAcceleratorConfiguration">
      </key>
      <key
            sequence="M1+M2+M3+ARROW_DOWN"
            contextId="org.eclipse.ui.globalScope"
            commandId="org.eclipse.mylyn.context.ui.commands.interest.decrement"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
      </key>
      <key
            sequence="M1+M2+M3+ARROW_RIGHT"
            contextId="org.eclipse.ui.globalScope"
            commandId="org.eclipse.mylyn.context.ui.dialog.show"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration">
      </key>
   </extension>     

   <extension point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            label="Task Context Decorator"
            class="org.eclipse.mylyn.internal.context.ui.InterestDecoratorLightweight"
            state="true"
            id="org.eclipse.mylyn.context.ui.decorator.interest">
         <description>
			Decorates the labels of elements to indicate whether they are a part of the task context.
		 </description>
         <enablement>
            <objectClass name="java.lang.Object"/>
         </enablement>
      </decorator>
   </extension>

 <extension point="org.eclipse.ui.viewActions"> 
 	<viewContribution 
		id="org.eclipse.mylyn.context.ui.taskList.contribution" 
   		targetID="org.eclipse.mylyn.tasks.ui.views.tasks">
    	<action
           class="org.eclipse.mylyn.internal.context.ui.actions.FocusTaskListAction"
           enablesFor="*"
           icon="icons/eview16/focus-tasklist.gif"
           id="org.eclipse.mylyn.context.ui.actions.tasklist.focus"
           label="Focus on Workweek"
           menubarPath="additions"
           style="toggle"
           toolbarPath="context"
           tooltip="Focus on Workweek"/> 
  	<action
            class="org.eclipse.mylyn.internal.context.ui.actions.ContextCapturePauseAction"
            icon="icons/elcl16/capture-pause.gif"
            id="org.eclipse.mylyn.ui.context.capture.pause"
            label="Pause Capturing Context"
            menubarPath="additions"
            style="toggle"
            tooltip="Pause Capturing Context"/>
  	</viewContribution>
	<viewContribution 
		id="org.eclipse.mylyn..context.ui.outline.contribution" 
   		targetID="org.eclipse.ui.views.ContentOutline">
    	<action
           class="org.eclipse.mylyn.internal.context.ui.actions.FocusOutlineAction"
           enablesFor="*"
           icon="icons/elcl16/interest-filtering.gif"
           id="org.eclipse.mylyn.context.ui.contentOutline.focus"
           label="Focus on Active Task (Alt+click to reveal filtered elements)"
           menubarPath="mylyn"
           style="toggle"
           toolbarPath="mylyn"
           tooltip="Focus on Active Task"> 
  		</action> 
  	</viewContribution>
   </extension>
   
</plugin>
